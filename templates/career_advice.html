{% extends 'layout/layout_home.html' %}
{% load static %}
{% block page_header %}
    Career Advice
{% endblock %}
{% block breadcrumb %}
    <a href="{% url 'home' %}">Home</a> /
    <span>Career Advice</span>
{% endblock %}
{% block body_block %}

    <div class="alice-bg section-padding-bottom" >
        <div class="container">
            <div class="row">
                <div class="col">
                    <div class="blog-post-wrapper">
                        <div id="career-result">

                        </div>
                        <nav id="pagination-wrapper" class="mt-3">

                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
{% block extra_js %}
<script>
function fetchDataCallback(data){
    if(data) {
        $(".blog-list").remove();
        for(index=0;index<data.results.length;index++){
            var dateString = data.results[index].posted_at
            var momentObj = moment(dateString, 'YYYY-MM-DD');
            var created_date = momentObj.format('DD/MM/YYYY');

            $('#career-result').append('<article class="blog-list">'+
                '<div class="info">'+
                '<img src="'+data.results[index].thumbnail_image+'" class="img-fluid ca-thumb" alt="Thumbnail">'+
                '</div>'+
                '<div class="content">'+
                '<h3><a href="details/'+ data.results[index].id +'">'+data.results[index].title+'</a></h3>'+
                '<div class="author-info">'+
                '<span>'+data.results[index].author+', '+created_date+'</span>'+
                '</div>'+
                '<p>'+data.results[index].short_description+'<a href="details/'+ data.results[index].id +'" target="_blank" class="button career-advise-more-button">more..</a></p>'+
                '</div>'+
                '</article>'
            );
        }
        makePaginator("#pagination-wrapper", data, 'fetchDataCallback');
    }
}


$(document).ready(function () {
    initAjaxForms();
    var careerUrl = "/api/career_advice/";
    get(careerUrl, fetchDataCallback);
})
</script>
{% endblock %}