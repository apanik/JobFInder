{% extends 'layout/layout_professional.html' %}
{% load static %}
{% block page_header %}
    My Profile
{% endblock %}
{% block breadcrumb %}
    <a href="{% url 'home' %}">Home</a> /
    <span>My Profile</span>
{% endblock %}

{% block professional_block %}

    <div class="skill-and-profile dashboard-section float-right">

        <div class="social-profile">
            <label>Social:</label>
            <a class="facebook" href=""><i class="fab fa-facebook-f"></i></a>
            <a class="twitter" href=""><i class="fab fa-twitter"></i></a>
            <a class="linkedin" href=""><i class="fab fa-linkedin-in"></i></a>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary edit-button" data-toggle="modal" data-target="#modal-social">
                <i data-feather="edit-2"></i>
            </button>
            <!-- Modal -->
            <div class="modal fade" id="modal-social" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <div class="title">
                                <h4><i data-feather="git-branch"></i>Social Networks</h4>
                                <!--                              <a href="#" class="add-more">+ Add Social</a>-->
                            </div>
                            <div class="content">
                                <form action="" class=""  id="social-update-form" novalidate="novalidate">

                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label">Social Links</label>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text"><i class="fab fa-facebook-f"></i></div>
                                                    <label class="input-group" style="width:160px;margin-left:8px;justify-content:space-around;" id="fb"></label>
                                                </div>
                                                <input type="text" id="facebook_id" name="facebook_id" placeholder="username" style="margin-top:3px;" class="form-control" value="">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="offset-sm-3 col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text"><i class="fab fa-twitter"></i></div>
                                                    <label class="input-group"  style="width:160px;justify-content:space-around;" id="tw"></label>
                                                </div>

                                                <input type="text" id="twitter_id" name="twitter_id" placeholder="username" style="margin-top:3px;" class="form-control"  value="">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <div class="offset-sm-3 col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text"><i class="fab fa-linkedin-in"></i></div>
                                                    <label class="input-group"  style="width:160px;margin-left:5px;justify-content:space-around;" id="ln">/</label>
                                                </div>

                                                <input type="text" id="linkedin_id" name="linkedin_id"  placeholder="username" style="margin-top:3px;" class="form-control" value="">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="offset-sm-3 col-sm-9">
                                            <div class="buttons">
                                                <button class="btn btn-yellow">Save Update</button>
                                                <button class="btn btn-yellow" data-dismiss="modal">Cancel</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-6">
        <form action="" id="profile-form" class="dashboard-form profile-form-ajax" method="PUT" data-callback = "profileUpdateCallback" enctype="multipart/form-data" novalidate="novalidate">
            <div class="dashboard-section upload-profile-photo ">
                <div class="update-photo prof-profile-photo">
                    <!--                <input type="text" id="image" value="">-->
                    <img id="image1" class="image jcrop-holder" src="{% static 'dashboard/images/user-1.jpg' %}" alt="">
                </div>
                <div class="file-upload">
                    <input src="ok" type="file" accept="image/*" id="profile-image" class="image-file-input profile-image-input">Change Picture
                </div>
            </div>
            <div class="dashboard-section basic-info-input profile-picture-button" style="display: none">
                <div class="form-group row">
                    {#                <label class="col-form-label"></label>#}
                    <div class="col-sm-12">
                        <button class="btn btn-yellow picture-save-button"> Save Picture </button>
                    </div>
                </div>
            </div>
        </form>
        <form action="" id="profile-form" class="dashboard-form ajax" method="PUT" data-callback = "profileUpdateCallback" enctype="multipart/form-data" novalidate="novalidate">
            <div class="dashboard-section basic-info-input display-none">
                <h4><i data-feather="lock"></i>Password</h4>

                <div class="form-group row">
                    <label class="col-sm-3 col-form-label">Password</label>
                    <div class="col-sm-9">
                        <input type="password" name="password" class="form-control" placeholder="Password">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label">Retype Password</label>
                    <div class="col-sm-9">
                        <input type="password" class="form-control" placeholder="Retype Password">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label"></label>
                    <div class="col-sm-9">
                        <button class="btn btn-yellow">Save</button>
                    </div>
                </div>
            </div>
        </form>
        <div class="apply-popup crop-popup">
            <div class="modal fade" id="crop-popup-id" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title"><i data-feather="edit"></i>Crop Profile Picture</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <img src="" class="image-width" id="image">
                        </div>
                        <div class="modal-footer">
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-default js-zoom-in">
                                    <i data-feather="zoom-in"></i>
                                </button>
                                <button type="button" class="btn btn-default js-zoom-out">
                                    <i data-feather="zoom-out"></i>
                                </button>
                            </div>
                            <button type="button" class="button js-crop-and-preview">Crop</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="about-details details-section dashboard-section" id="about-details">
        <div id="about-details-div">
            <h4><i data-feather="user-check"></i>Basic Info</h4>
            <div class="information-and-contact">
                {#                  <div class="information">#}
                {#                    <h4>Information</h4>#}
                <ul>
                    <div id="basic-info-margin">
                        <span><h8>About Me: </h8></span><br>
                        <span class="about" id="about_me"></span>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <span><h8>Industry: </h8></span> <span id="industry_expertise"></span>
                        </div>
                        <div class="col-sm-6">
                            <span><h8>Location: </h8></span> <span id="current_location"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <span><h8>Years of Experience:</h8></span> <span id="experience"></span>
                        </div>
                        <div class="col-sm-6">
                            <span><h8>Qualification:</h8></span> <span id="qualification"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <span><h8>Mobile number:</h8></span> <span id="phone"></span>
                        </div>
                        <div class="col-sm-6">
                            <span><h8>Company:</h8></span> <span id="current_company"></span>
                        </div>
                        <div class="col-sm-6">
                            <span><h8>Designation:</h8></span> <span id="current_designation"></span>
                        </div>
                    </div>

                    <!--                    <li><span>Age:</span> <span id="status"></span></li>-->

                </ul>
                {#                  </div>#}
            </div>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary about-me-btn edit-resume" data-toggle="modal" data-target="#modal-about-me">
                <i data-feather="edit-2"></i>
            </button>
            <!-- Modal -->
        </div>
        <div class="modal fade" id="modal-about-me" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="title">
                            <h4><i data-feather="user-check"></i>Basic Info</h4>
                        </div>
                        <div class="content">
                            <form action="" class="info-update" id="info-update-form" novalidate="novalidate">
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label"> About Me</label>
                                    <div class="col-sm-9">
                                        <textarea class="about tinymce-editor tinymce-editor-1" id="about_me" name="about_me" placeholder="Write Yourself" value=""></textarea>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Industry</label>
                                    <div class="col-sm-9">
                                        <select class="form-control" name="industry_expertise" id="industry_expertise" data-text="name" data-value="name"  data-placeholder="Select Category" data-src="/api/industry/list" value="">
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Location</label>
                                    <div class="col-sm-9">
                                        <input type="text" name="current_location" id="current_location" class="form-control"  placeholder="Dhaka" required data-msg-required="Location is required">
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Experience</label>
                                    <div class="col-sm-9">
                                        <select class="form-control" name="experience" id="experience" data-text="name" data-value="name" data-placeholder="Experience" data-src="/api/experience/list">
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Qualification</label>
                                    <div class="col-sm-9">
                                        <!--                                  <input type="text" class="form-control"  placeholder="Gradute">-->
                                        <select class="form-control" name="qualification" id="qualification" data-text="name" data-value="name" data-placeholder="Qualification" data-src="/api/qualification/list">
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Mobile Number</label>
                                    <div class="col-sm-9">
                                        <input type="text" name="phone" id="phone" regex="^01\d{9}$" class="form-control"  placeholder="01XXX-XXXXXX" data-msg-regex="Please Enter Your 11 digit Valid Mobile Number" required data-msg-required="Mobile number is required">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Company</label>
                                    <div class="col-sm-9">
                                        <input type="text" name="current_company" id="current_company" class="form-control"  placeholder="Ishraak Solution" >
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Designation</label>
                                    <div class="col-sm-9">
                                        <input type="text" name="current_designation" id="current_designation" class="form-control"  placeholder="Jr. Software Engineer">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="offset-sm-3 col-sm-9">
                                        <div class="buttons">
                                            <button class="btn btn-yellow">Save Update</button>
                                            <button class="btn btn-yellow" data-dismiss="modal">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="edication-background details-section dashboard-section">
        <div class="education-div">
            <h4 id="edu-label"><i data-feather="book"></i>Education</h4>
            <a href="#" id="add-education" class="add-new-field add-new-record btn-yellow" data-toggle="modal" data-target="#modal-education">+ Add Education</a>
        </div>
        <!-- Modal -->
        <div class="modal fade modal-education" id="modal-education" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="title">
                            <h4><i data-feather="book"></i>Education</h4>
                            <!--                        <a href="#" id="add-education" class="add-more">+ Add Education</a>-->
                        </div>
                        <div class="content">
                            <form action="#" id="education-form" autocomplete="off">
                                <div class="input-block-wrap input-block-edu" >
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Institution</div>
                                                </div>
                                                <input type="text" name="institution_text" id="institution_text" class="form-control" required data-msg-required="Institution is required">
                                                <input type="hidden" name="institution" id="institution_id" class="form-control" >
                                                <input type="hidden" name="id" id="id" class="form-control" >
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label edu-div-lavel"></label>
                                        <div class="col-sm-5">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Level of education</div>
                                                </div>
                                                <select class="form-control" name="education_level_id" id="education_level" data-text="name" data-value="id"  data-placeholder="Select Level of education" data-src="/api/professional/education_level/" value="" required data-msg-required="Education Level is required">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="input-group">
                                                <div class="input-group-prepend" style="width: 55px;">
                                                    <div class="input-group-text">Degree</div>
                                                </div>
                                                <input type="text" name="degree_text" id="degree_text" class="form-control" required data-msg-required="Degree is required">
                                            </div>
                                        </div>
                                    </div>


                                    <div class="form-group row">
                                        <div class="col-sm-4 offset-sm-3">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">CGPA</div>
                                                </div>
                                                <input type="text" name="cgpa" id="cgpa" class="form-control" >
                                            </div>
                                        </div>
                                        <div class="col-sm-5">
                                            <div class="input-group">
                                                <div class="input-group-prepend" style="width: 70px;">
                                                    <div class="input-group-text">Major</div>
                                                </div>
                                                <input type="text" name="major_text" id="major_text" class="form-control">
                                            </div>
                                        </div>

                                    </div>
                                    <!--                            <div class="form-group row">-->
                                    <!--                            </div>-->
                                    <div class="form-group row display-none">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Major Text</div>
                                                </div>
                                                <input type="text" name="major_text" id="major_text" class="form-control" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Description</div>
                                                </div>
                                                <textarea type="text" name="description" id="edu-description" class="form-control tinymce-editor tinymce-editor-1" ></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-4 offset-sm-3">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Enrolled</div>
                                                </div>
                                                <input type="text" name="enrolled_date" id="enrolled_date" class="form-control datepicker"  placeholder="DD/MM/YYYY" value="" required data-msg-required="Enrolled date is required" readonly>
                                            </div>
                                        </div>
                                        <div class="col-sm-5">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Graduation</div>
                                                </div>
                                                <input type="text" name="graduation_date" id="graduation_date" class="form-control datepicker"  placeholder="DD/MM/YYYY" value="" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <!--                                <div class="input-group">-->
                                            <!--                                  <div class="input-group-prepend">-->
                                            <!--                                    <div class="input-group-text">On Going</div>-->
                                            <!--                                  </div>-->
                                            <!--                                  <input type="checkbox" name="on_going" id="on_going" class="form-control" value="">-->
                                            <!--                                </div>-->
                                            <div class="mt-0 terms">
{#                                                <input type="checkbox" id="is_ongoing" name="is_ongoing">#}
{#                                                <label for="is_ongoing">#}
{#                                                    <span class="dot"></span> Ongoing#}
{#                                                </label>#}
                                                <label class="yellow-checkbox"><p>Ongoing</p>
                                                    <input type="checkbox" id="is_ongoing" name="is_ongoing">
                                                    <span></span>
                                                </label>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="offset-sm-3 col-sm-9">
                                        <div class="buttons">
                                            <button class="btn btn-yellow edu-submit">Save</button>
                                            <button class="btn btn-yellow" data-dismiss="modal">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="experience dashboard-section details-section">
        <div id="experience-div">
            <h4 id="exp-label"><i data-feather="briefcase"></i>Work Experience</h4>
            <a href="#" id="add-experience" class="add-new-field add-new-record btn-yellow" data-toggle="modal" data-target="#modal-experience">+ Add Experience</a>
        </div>
        <!-- Button trigger modal -->
        <!--              <button type="button" class="btn btn-primary edit-resume work-exp" data-toggle="modal" data-target="#modal-experience">-->
        <!--                <i data-feather="edit-2"></i>-->
        <!--              </button>-->
        <!-- Modal -->
        <div class="modal fade modal-experience" id="modal-experience" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="title">
                            <h4><i data-feather="briefcase"></i>Work Experience</h4>
                            <!--                        <a href="#" id="add-experience" class="add-more">+ Add Experience</a>-->
                        </div>
                        <div class="content">
                            <form action="#" id="experience-form" novalidate="novalidate" autocomplete="off">
                                <div class="input-block-wrap input-block-experience">
                                    <div class="form-group row display-none">
                                        <label class="col-sm-3 col-form-label experience-div-label"></label>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Company</div>
                                                </div>
                                                <select class="form-control" name="company_id" id="company_id" data-text="name" data-value="name"  data-placeholder="Select Company" data-src="/api/company/list" value="" required data-msg-required="Company is required"></select>
                                                 <input type="hidden" name="compan_text" id="company_name" class="form-control" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label experience-div-label"></label>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Company</div>
                                                </div>
                                                <input type="text" name="company_text" id="company_text" class="form-control" required data-msg-required="Company is required">
                                                <input type="hidden" name="id" id="id" class="form-control" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Designation</div>
                                                </div>
                                                <input type="text" name="designation" id="designation" class="form-control" required data-msg-required="Designation is required">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Description</div>
                                                </div>
                                                <textarea type="text" name="description" id="wexp-description" class="form-control tinymce-editor tinymce-editor-1" ></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="offset-sm-3 col-sm-4">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Start Date</div>
                                                </div>
                                                <input type="text" name="start_date" id="start_date" class="form-control datepicker" required data-msg-required="Start date is required" readonly>
                                            </div>
                                        </div>
                                        <div class="col-sm-5">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">End Date</div>
                                                </div>
                                                <input type="text" name="end_date" id="end_date" class="form-control datepicker" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="mt-0 terms">
{#                                                <input type="checkbox" id="is_currently_working" name="is_currently_working">#}
{#                                                <label for="is_currently_working">#}
{#                                                    <span class="dot"></span> Currently Working Here#}
{#                                                </label>#}
                                                <label class="yellow-checkbox"><p>Currently Working Here</p>
                                                    <input type="checkbox" id="is_currently_working" name="is_currently_working">
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="offset-sm-3 col-sm-9">
                                        <div class="buttons">
                                            <button class="btn btn-yellow">Save</button>
                                            <button class="btn btn-yellow" data-dismiss="modal">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="professonal-skill dashboard-section details-section">
        <div class="professional-skill-div">
            <h4 ><i class="fas fa-tools profile-skill"></i>Professional Skill</h4>
            <div class="progress-group" id="skill-label">
            </div>
            <a href="#" id="add-skill" class="add-new-field add-new-record btn-yellow" data-toggle="modal" data-target="#modal-pro-skill">+ Add Skill</a>
        </div>
        <!-- Button trigger modal -->
        {#              <button type="button" class="btn btn-primary edit-resume" data-toggle="modal" data-target="#modal-pro-skill">#}
        {#                <i data-feather="edit-2"></i>#}
        {#              </button>#}
        <!-- Modal -->
        <div class="modal fade modal-pro-skill" id="modal-pro-skill" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="title">
                            <h4><i class="fas fa-tools profile-skill-modal"></i>Professional Skill</h4>
                        </div>
                        <div class="content">
                            <form action="#" id="pro-skill-form" novalidate="novalidate">
                                <div class="input-block-wrap input-block-skill">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label skill-div-lavel"></label>
                                        <div class="col-sm-9" id="skill-error-div">
                                            <div class="input-group" id="skill-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Skill Name</div>
                                                </div>
                                                <select class="form-control" name="skill_name" id="skill_name" data-text="name" data-value="id"  data-placeholder="" data-src="/api/skill/list/" value="" required data-msg-required="Skill is required">
                                                </select>
                                                <input type="hidden" name="id" id="id" class="form-control skill_object_id" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="offset-sm-3 col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Expertise</div>
                                                </div>
                                                <input type="text" max="10" class="form-control" name="rating" id="rating" placeholder="Enter value between 1-10" required data-msg-required="Rating is required">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="offset-sm-3 col-sm-9">
                                        <div class="buttons">
                                            <button class="btn btn-yellow">Save</button>
                                            <button class="btn btn-yellow" data-dismiss="modal">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="certification dashboard-section details-section">
        <div id="certification-div">
            <h4 id="cer-label"><img id="certification-logo" src="{% static 'images/certification-file.svg' %}">Certification</h4>
            <a href="#" id="add-certification" class="add-new-field add-new-record btn-yellow" data-toggle="modal" data-target="#modal-certification">+ Add Certification</a>
        </div>
        <!-- Button trigger modal -->
        <!--              <button type="button" class="btn btn-primary edit-resume work-exp" data-toggle="modal" data-target="#modal-experience">-->
        <!--                <i data-feather="edit-2"></i>-->
        <!--              </button>-->
        <!-- Modal -->
        <div class="modal fade modal-certification" id="modal-certification" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="title">
                            <h4><img id="certification-modal-logo" src="{% static 'images/certification-file.svg' %}"></i>Certification</h4>
                            <!--                        <a href="#" id="add-experience" class="add-more">+ Add Experience</a>-->
                        </div>
                        <div class="content">
                            <form action="#" id="certification-form" novalidate="novalidate" autocomplete="off">
                                <div class="input-block-wrap input-block-certification">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label certification-div-label"></label>
                                        <div class="col-sm-9">
                                            <div class="input-group cer-input">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Certification Name</div>
                                                </div>
                                                <input type="text" name="certificate_name" id="certificate_name" class="form-control" required data-msg-required="Name is required">
                                                <input type="hidden" name="id" id="id" class="form-control" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="input-group mbr-input">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Organization Name</div>
                                                </div>
                                                <input type="text" name="organization" id="certification_organization" class="form-control" required data-msg-required="Organization is required">
                                                <input type="hidden" name="certification_key" id="certification_key" class="form-control" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="input-group cer-input">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Credential Id</div>
                                                </div>
                                                <input type="text" name="credential_id" id="credential_id" class="form-control" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="input-group cer-input">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Credential URL</div>
                                                </div>
                                                <input type="text" name="credential_url" id="credential_url" class="form-control" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="offset-sm-3 col-sm-4">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text issue-date">Issue Date</div>
                                                </div>
                                                <input type="text" name="issue_date" id="issue_date" class="form-control datepicker" required data-msg-required="Issue date is required" readonly>
                                            </div>
                                        </div>
                                        <div class="col-sm-5">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Expiry Date</div>
                                                </div>
                                                <input type="text" name="expiry_date" id="expiry_date" class="form-control datepicker" disabled readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="mt-0 terms">
{#                                                <input type="checkbox" id="has_expiry_period" name="has_expiry_period">#}
{#                                                <label for="has_expiry_period">#}
{#                                                    <span class="dot"></span>Has Expiry date#}
{#                                                </label>#}
                                                <label class="yellow-checkbox"><p>Has Expiry date</p>
                                                    <input type="checkbox" id="has_expiry_period" name="has_expiry_period">
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="offset-sm-3 col-sm-9">
                                        <div class="buttons">
                                            <button class="btn btn-yellow">Save</button>
                                            <button class="btn btn-yellow" data-dismiss="modal">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="membership details-section dashboard-section">
        <div class="membership-div">
            <h4 id="mbr-label"><i data-feather="user-check"></i>Membership</h4>
            <a href="#" id="add-membership" class="add-new-field btn-yellow add-new-record" data-toggle="modal" data-target="#modal-membership">+ Add Membership</a>


            <!-- Button trigger modal -->
            {#              <button type="button" class="btn btn-primary edit-resume" data-toggle="modal" data-target="#modal-education">#}
            {#                <i data-feather="edit-2"></i>#}
            {#              </button>#}
        </div>
        <!-- Modal -->

        <div class="modal fade modal-membership" id="modal-membership" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="title">
                            <h4><i data-feather="user-check"></i>Membership</h4>
                            <!--                        <a href="#" id="add-education" class="add-more">+ Add Education</a>-->
                        </div>
                        <div class="content">
                            <form action="#" id="membership-form" autocomplete="off" novalidate="novalidate">
                                <div class="input-block-wrap mbr" >
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label edu-div-lavel"></label>
                                        <div class="col-sm-9">
                                            <div class="input-group mbr-input">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Organization Name</div>
                                                </div>
                                                <input type="text" name="organization" id="membership_organization" class="form-control" required data-msg-required="Organization is required">
                                                <input type="hidden" name="organization_key" id="organization_key" class="form-control" >
                                                <input type="hidden" name="id" id="id" class="form-control" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="input-group cer-input">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Position Held</div>
                                                </div>
                                                <input type="text" name="position_held" id="position_held" class="form-control" required data-msg-required="Position is required">
                                            </div>
                                        </div>
                                    </div>
                                    <!--                            <div class="form-group row">-->
                                    <!--                            </div>-->
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Description</div>
                                                </div>
                                                <textarea type="text" name="description" id="mbr-description" class="form-control tinymce-editor tinymce-editor-1" ></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-4 offset-sm-3">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text issue-date">Starting Date</div>
                                                </div>
                                                <input type="text" name="start_date_mbr" id="start_date_mbr" class="form-control datepicker"  placeholder="DD/MM/YYYY" value="" required data-msg-required="Start date is required" readonly>
                                            </div>
                                        </div>
                                        <div class="col-sm-5">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">End Date</div>
                                                </div>
                                                <input type="text" name="end_date_mbr" id="end_date_mbr" class="form-control datepicker"  placeholder="DD/MM/YYYY" value="" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <!--                                <div class="input-group">-->
                                            <!--                                  <div class="input-group-prepend">-->
                                            <!--                                    <div class="input-group-text">On Going</div>-->
                                            <!--                                  </div>-->
                                            <!--                                  <input type="checkbox" name="on_going" id="on_going" class="form-control" value="">-->
                                            <!--                                </div>-->
                                            <div class="mt-0 terms">
{#                                                <input type="checkbox" id="membership_ongoing" name="membership_ongoing">#}
{#                                                <label for="membership_ongoing">#}
{#                                                    <span class="dot"></span>Membership Ongoing#}
{#                                                </label>#}
                                                <label class="yellow-checkbox"><p>Membership Ongoing</p>
                                                    <input type="checkbox" id="membership_ongoing" name="membership_ongoing">
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="offset-sm-3 col-sm-9">
                                        <div class="buttons">
                                            <button class="btn btn-yellow edu-submit">Save</button>
                                            <button class="btn btn-yellow" data-dismiss="modal">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="portfolio dashboard-section details-section">
        <div id="portfolio-div">
            <h4 id="port-label"><i data-feather="gift"></i>Portfolio</h4>
            <a href="#" id="add-portfolio" class="add-new-field add-new-record btn-yellow" data-toggle="modal" data-target="#modal-portfolio">+ Add Portfolio</a>
        </div>
        <!-- Button trigger modal -->
        {#              <button type="button" class="btn btn-primary edit-resume" data-toggle="modal" data-target="#modal-portfolio">#}
        {#                <i data-feather="edit-2"></i>#}
        {#              </button>#}
        <!-- Modal -->
        <div class="modal fade modal-portfolio" id="modal-portfolio" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="title">
                            <h4><i data-feather="grid"></i>Portfolio</h4>
                        </div>
                        <div class="content">
                            <form action="#" id="portfolio-form" autocomplete="off" novalidate="novalidate">
                                <div class="input-block-wrap">
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label"></label>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Title</div>
                                                </div>
                                                <input type="text" class="form-control" name="name" id="name" required>
                                                <input type="hidden" name="id" id="id" class="form-control portfolio-id" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="offset-sm-3 col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Image</div>
                                                </div>
                                                <div class="upload-profile-photo">
                                                    <div class="update-photo port-photo">
                                                        <img class="image" src="" alt="" name="image" id="image">
                                                    </div>
                                                    <div class="file-upload">
                                                        <input type="file" class="file-input portfolio-image" >Add Image
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="offset-sm-3 col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Description</div>
                                                </div>
                                                <textarea type="text" name="description" id="port-description" class="form-control tinymce-editor tinymce-editor-1"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="offset-sm-3 col-sm-9">
                                        <div class="buttons">
                                            <button class="btn btn-yellow">Save</button>
                                            <button class="btn btn-yellow" data-dismiss="modal">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="reference details-section dashboard-section">
        <div class="reference-div">
            <h4 id="ref-label"><i data-feather="user-check"></i>Reference</h4>
            <a href="#" id="add-reference" class="add-new-field btn-yellow add-new-record" data-toggle="modal" data-target="#modal-reference">+ Add Reference</a>


            <!-- Button trigger modal -->
            {#              <button type="button" class="btn btn-primary edit-resume" data-toggle="modal" data-target="#modal-education">#}
            {#                <i data-feather="edit-2"></i>#}
            {#              </button>#}
        </div>
        <!-- Modal -->

        <div class="modal fade modal-reference" id="modal-reference" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="title">
                            <h4><i data-feather="user-check"></i>Reference</h4>
                            <!--                        <a href="#" id="add-education" class="add-more">+ Add Education</a>-->
                        </div>
                        <div class="content">
                            <form action="#" id="reference-form" autocomplete="off" novalidate="novalidate">
                                <div class="input-block-wrap mbr" >
                                    <div class="form-group row">
                                        <label class="col-sm-3 col-form-label edu-div-lavel"></label>
                                        <div class="col-sm-9">
                                            <div class="input-group mbr-input">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">Description</div>
                                                </div>
                                                <textarea type="text" name="description" id="ref-description" class="form-control tinymce-editor tinymce-editor-1" required data-msg-required="Description is required"></textarea>
                                                <input type="hidden" name="id" id="id" class="form-control" >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="offset-sm-3 col-sm-9">
                                        <div class="buttons">
                                            <button class="btn btn-yellow edu-submit">Save</button>
                                            <button class="btn btn-yellow" data-dismiss="modal">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="personal-information dashboard-section details-section">
        <div id="personal-information-div">
            <h4><i data-feather="user-plus"></i>Personal Details</h4>
            <div class="details">
                <ul>
                    <li><span>Full Name:</span><span id="full_name"></span></li>
                    <li><span>Father's Name:</span> <span id="father_name"></span></li>
                    <li><span>Mother's Name:</span> <span id="mother_name"></span></li>
                    <li><span>Date of Birth:</span> <span id="do_birth"></span></li>
                    <li><span>Nationality:</span> <span id="nationality"></span> </li>
                    <li><span>Gender:</span> <span id="gender"></span></li>
                    <li><span>Religion:</span> <span id="religion"></span></li>
                    <li><span>Blood Group:</span> <span id="blood_group"></span></li>
                    <li><div class="row"><div class="col-lg-1"><span>Address:</span></div> <div class="col-lg-11"><span id="address"></span></div></div></li>
                    <li><div class="row"><div style="width: 18%; margin-left: 13px;"><span>Permanent Address:</span></div> <div style="width: 80%"><span id="permanent_address"></span></div></div></li>
                </ul>
            </div>
            <!--Button trigger modal -->
            <button type="button" class="btn btn-primary personal-details-btn edit-resume" data-toggle="modal" data-target="#modal-personal-details">
                <i data-feather="edit-2"></i>
            </button>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="modal-personal-details" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="title">
                            <h4><i data-feather="user-plus"></i>Personal Details</h4>
                        </div>
                        <div class="content">
                            <form action="" class="job-post-form ajaxDate" method="PUT" id="details-update-form" data-callback="personalCallback" novalidate="novalidate">
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Full Name</label>
                                    <div class="col-sm-9">
                                        <input type="text" name="full_name" id="full_name" class="form-control"  placeholder="Mr. Rahim" required value="" data-msg-required="Full name is required">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Fathers Name</label>
                                    <div class="col-sm-9">
                                        <input type="text" name="father_name" id="father_name" class="form-control"  placeholder="Mr. Karim" value="">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Mothers Name</label>
                                    <div class="col-sm-9">
                                        <input type="text" name="mother_name" id="mother_name" class="form-control"  placeholder="Mrs. Rahima" value="">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Date Of Birth</label>
                                    <div class="col-sm-9">
                                        <input type="text" name="date_of_birth" id="date_of_birth" class="form-control" placeholder="DD/MM/YYYY" value="" readonly>
                                        <i id="remove-dob" data-feather="delete"></i>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Nationality</label>
                                    <div class="col-sm-9">
                                        <!--                                  <input type="text" id="nationality" name="nationality" class="form-control"  placeholder="Bangladeshi" data-src="/api/nationality">-->
                                        <select class="form-control" name="nationality" id="nationality" data-text="name" data-value="id" data-placeholder="Nationality" data-src="/api/professional/nationality">
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Gender</label>
                                    <div class="col-sm-9">
                                        <!--                                  <input type="text" id="gender_id" name="gender" class="form-control"  placeholder="Male">-->
                                        <select class="form-control" name="gender" id="gender" data-text="name" data-value="name" data-placeholder="Gender" data-src="/api/gender/list" value="">
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Religion</label>
                                    <div class="col-sm-9">
                                        <!--                                  <input type="text" id="gender_id" name="gender" class="form-control"  placeholder="Male">-->
                                        <select class="form-control" name="religion" id="religion" data-text="name" data-value="id" data-placeholder="Religion" data-src="/api/professional/religion/" value="">
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Blood Group</label>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control" name="blood_group" id="blood_group"  placeholder="O+" value="">
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Address</label>
                                    <div class="col-sm-9">
                                        <textarea type="text" class="form-control tinymce-editor tinymce-editor-1" name="address" id="address"  placeholder="2018 Nelm Street, Beltsville, VA 20705" value=""></textarea>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Permanent Address</label>
                                    <div class="col-sm-9">
                                        <textarea type="text" class="form-control tinymce-editor tinymce-editor-1" name="permanent_address" id="permanent_address"  placeholder="2018 Nelm Street, Beltsville, VA 20705" value=""></textarea>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="offset-sm-3 col-sm-9">
                                        <div class="buttons">
                                            <button class="btn btn-yellow" id="details-update-button">Save Update</button>
                                            <button class="btn btn-yellow" data-dismiss="modal">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="dashboard-section details-section last-child">
        <div class="mt-0 terms job-alert-subscription">
{#            <input type="checkbox" id="job_alert_status" name="job_alert_status" value="">#}
{#            <label for="job_alert_status">#}
{#                <span class="dot"></span> <span id="subscribe-text">Subscribe for job alert.</span>#}
{#            </label>#}
            <label class="yellow-checkbox">
                <p id="subscribe-text"></p>
                <input type="checkbox" id="job_alert_status" name="job_alert_status" value="">
                <span></span>
            </label>
        </div>
    </div>
    <!-- Call to Action -->
{% endblock %}
{% block extra_js %}
    <script>
        $(document).ready(function() {
            $('.profile-details-bar').addClass('active');

            $('.profile-image-input').on('click',function () {
                $('.profile-picture-button').css('display','')
            });
            cropImage("profile-image", "crop-popup-id");
            var postUrl = '/api/professional/profile_update/'+ id + '/';

            $("form.profile-form-ajax").on('submit', function(event) {
                event.preventDefault();
                if ($(this).valid()){
                    var url = $(this).prop('action');
                    var formId = $(this).attr("id");
                    var data = form2Json(formId);
                    // Image uploading code start here
                    var imagesrc = $(".image").attr('src');
                    if(imagesrc){
                        var stringLength = imagesrc.length - 'data:image/png;base64,'.length;
                        var sizeInBytes = 4 * Math.ceil((stringLength / 3))*0.5624896334383812;
                        var sizeInKb=sizeInBytes/1000;
                    }
                    if (imagesrc){
                        var imagesrcPart = imagesrc.split(":");
                        var jsonObj;
                        if (imagesrcPart[0] === "data"){
                            jsonObj = JSON.parse(data);
                            jsonObj.image = imagesrc;
                            data = JSON.stringify(jsonObj);
                        }else {
                            jsonObj = JSON.parse(data);
                            jsonObj.image = '';
                            data = JSON.stringify(jsonObj);
                        }
                    }

                    // Image uploading code end here
                    if(sizeInKb <= 2048){
                        var method = $(this).attr('method');
                        var callback= $(this).data("callback");  // $(this).attr("data-callback");
                        send(url, method, data, callback);
                        $('.profile-picture-button').css('display','none');
                        $('#prof-image').html('<img src="'+ imagesrc +'" class="img-fluid" alt="">')
                        $('.account-thumb').html('<img src="'+ imagesrc +'" class="img-fluid" alt="">')
                    }
                    else{
                        showError('Picture Maximum Size Exceeded','Enter A Picture below 2MB Size');
                        $('.profile-picture-button').css('display','none');
                    }

                }
                {#return false;#}
            });

            $('#job-update-form').validate({
                errorClass: "my-error-class",
            });

            $('#details-update-form').validate({
                errorClass: "my-error-class",
            });

            $('#social-update-form').validate({
                errorClass: "my-error-class",
            });

            $('#reference-form').validate({
                errorClass: "my-error-class",
                ignore: '',
                errorPlacement: function(error, element) {
                    error.insertAfter(element.parent());
                },
            });


            $('#portfolio-form').validate({
                errorClass: "my-error-class",
                errorPlacement: function(error, element) {
                    error.insertAfter(element.parent());
                },
            });

            $('#pro-skill-form').validate({
                errorClass: "my-error-class",
                errorPlacement: function(error, element) {
                    error.insertAfter(element.parent());
                },
            });

            $('#experience-form').validate({
                errorClass: "my-error-class",
                errorPlacement: function(error, element) {
                    error.insertAfter(element.parent());
                },
                rules: {
                    end_date: { greater: "#start_date" },
                }
            });

            $('#info-update-form').validate({
                errorClass: "my-error-class",
                rules: {
                    expected_salary_max: {
                        gre:"#expected_salary_min"
                    },
                }
            });


            $('#membership-form').validate({
                errorClass: "my-error-class",
                errorPlacement: function(error, element) {
                    error.insertAfter(element.parent());
                },
                rules: {
                    end_date_mbr: {greater: "#start_date_mbr"}
                }
            });

            $('#certification-form').validate({
                errorClass: "my-error-class",
                errorPlacement: function(error, element) {
                    error.insertAfter(element.parent());
                },
                rules: {
                    expiry_date : { expiry_greater: "#issue_date" },
                }
            });

            $('#education-form').validate({
                errorClass: "my-error-class",
                errorPlacement: function(error, element) {
                    error.insertAfter(element.parent());
                },
                rules: {
                    graduation_date: { greaterThan: "#enrolled_date" },
                }
            });

            $(".portfolio-image").on('change',function () {
                if (!((this.files[0].size / 1000) < 1000)) {
                    showError('Picture Maximum Size Exceeded','Enter A Picture below 1MB Size');
                    setTimeout(function () {
                        $(".port-photo .image").attr('src', '');
                    }, 500);
                }
            });
            $('#profile-form').validate();
            var getUrl = '/api/professional/profile/';

            setTimeout(function () {
                get(getUrl,loadData);
            }, 1200);


            initAjaxSelects();
            var postUrl = '/api/professional/profile_update_partial/';
            $('form.profile-form-ajax').attr('action',postUrl);
            $('form.ajax').attr('action',postUrl);
            $('form.ajaxDate').attr('action',postUrl);

            $('#add-education').on('click', function (event) {
                event.preventDefault();
                $("#modal-education").find('form')[0].reset();
                $("#education-form #id").val('');
                $("#education-form #institution_id").val('');
                $("#education-form").validate().resetForm();
                $('#is_ongoing').val(false);
                $('#graduation_date').prop('disabled',false);
                $('#graduation_date-error').html('');
                $('#enrolled_date').datepicker('option', 'maxDate', null);
            });

            $('#add-reference').on('click', function (event) {
                event.preventDefault();
                $("#modal-reference").find('form')[0].reset();
                $("#reference-form #id").val('');
                $("#reference-form").validate().resetForm();
            });

            $('#add-experience').on('click', function (event) {
                event.preventDefault();
                $("#modal-experience").find('form')[0].reset();
                $("#experience-form #id").val('');
                $("#experience-form").validate().resetForm();
                $('#is_currently_working').val(false);
                $('#end_date').prop('disabled',false);
                $('#end_date-error').html('');
                $('#start_date').datepicker('option', 'maxDate', null);
            });

            $('#add-portfolio').on('click', function (event) {
                event.preventDefault();
                $("#modal-portfolio").find('form')[0].reset();
                $("#portfolio-form #id").val('');
                $("#portfolio-form").validate().resetForm();
                $('.port-photo .image').attr('src','')
                $('.portfolio-id').val('')
            });

            $('#add-membership').on('click', function (event) {
                event.preventDefault();
                $("#modal-membership").find('form')[0].reset();
                $("#membership-form #id").val('');
                $("#membership-form #organization_key").val('');
                $("#membership-form").validate().resetForm();
                $('#membership_ongoing').val(false);
                $('#end_date_mbr').prop('disabled',false);
                $('#end_date_mbr-error').html('');
                $('#start_date_mbr').datepicker('option', 'maxDate', null);
            });

            $('#add-certification').on('click', function (event) {
                event.preventDefault();
                $("#modal-certification").find('form')[0].reset();
                $("#certification-form #id").val('');
                $("#certification-form #certification_key").val('');
                $("#certification-form").validate().resetForm();
                $('#has_expiry_period').val(false);
                $('#issue_date').datepicker('option', 'maxDate', null);
                // $('#expiry_date').prop('disabled',false);
                // $('#expiry_date-error').html('');
            });

            // $('.work-exp').on('click', function () {
            //   get(getUrl,loadExpEdit);
            // });
            var path = window.location.pathname.split('/');
            var id = path[path.length-2];
            var emailSubUrl = '/api/professional/email-subscription-on-off/';
            $('#job_alert_status').click(function () {
                if($(this).prop("checked")){
                    var job_alert_status = $('#job_alert_status').is(':checked');
                    var data = {
                        'job_alert_status' : job_alert_status
                    };
                    put(emailSubUrl, JSON.stringify(data), loadJobAlertStatus);
                }
                else{
                    var job_alert_status = $('#job_alert_status').is(':checked');
                    var data = {
                        'job_alert_status' : job_alert_status
                    };
                    put(emailSubUrl, JSON.stringify(data), loadJobAlertStatus);
                }
            });

            $('#is_ongoing').click(function () {
                if($(this).prop("checked")){
                    $('#graduation_date').val('');
                    $('#graduation_date').prop("disabled", true);
                    $('#graduation_date-error').html('')
                }
                else{
                    $('#graduation_date').prop("disabled", false);
                }
            })

            $('#is_currently_working').click(function () {
                if($(this).prop("checked")){
                    $('#end_date').val('');
                    $('#end_date').prop("disabled", true);
                    $('#end_date-error').html('')
                }
                else{
                    $('#end_date').prop("disabled", false);
                }
            })


            $('#membership_ongoing').click(function () {
                if($(this).prop("checked")){
                    $('#end_date_mbr').val("");
                    $('#end_date_mbr').prop("disabled", true);
                    $('#end_date_mbr-error').html('')
                }
                else{
                    $('#end_date_mbr').prop("disabled", false);
                }
            })

            $('#has_expiry_period').click(function () {
                if($(this).prop("checked")){
                    $('#expiry_date').prop("disabled", false);
                    // $('#end_date-error').html('')
                }
                else{
                    $('#expiry_date').prop("disabled", true);
                    $('#expiry_date').val("");
                    $('#expiry_date-error').html('')
                }
            })

            $('#add-skill').on('click', function (event) {
                $("#modal-pro-skill").find('form')[0].reset();
                $("#pro-skill-form").validate().resetForm();
                $('.skill_object_id').val('');

            });

            $('.professional-skill-div').on('click','.delete-skill',function () {
                var obj_id = $(this).parent().parent().find(".skill-obj-id").val();
                showQuestion('Delete','Do You Want to Delete?', function(){skillDelete(obj_id);});

            });

            $('.professional-skill-div').on('click','.update-skill',function (event) {
                el = $('#skill-error-div').find('#skil_error');
                if (el){
                    $('#skill_error').remove();
                }
                var obj_id = $(this).parent().parent().find(".skill-obj-id").val();
                var getUrl = '/api/professional/professional_skill_object/'+ obj_id + '/';
                get(getUrl, loadSkillObject);
            });

            {# Skill create and update #}
            $('#pro-skill-form').on('submit', function (event) {
                event.preventDefault();
                var skill_id=$(this).find('#id').val();
                var skill_name=$(this).find('#skill_name').val();
                el = $('#skill-error-div').find('#skil_error');
                if (el){
                    $('#skill_error').remove();
                }
                var rating=$(this).find('#rating').val();
                data = {}
                if(skill_name){
                    data.skill_name_id = skill_name;
                }
                if(rating){
                    data.rating = rating;
                }
                skillCreateUrl = "/api/professional/professional_skill/";
                skillUpdateUrl = "/api/professional/professional_skill/"+skill_id+"/";
                if(Object.keys(data).length>1 && $(this).valid() && skill_id ){
                    put(skillUpdateUrl, JSON.stringify(data), loadProfSkillsCreateUpdate);
                    el = $('#skill-error-div').find('#skil_error');
                    if (el){
                        $('#skill_error').remove();
                    }
                }
                if(Object.keys(data).length>1 && $(this).valid() && !skill_id ){
                    el = $('#skill-error-div').find('#skil_error');
                    if (el){
                        $('#skill_error').remove();
                    }
                    var status =0
                    $('.progress-on').each(function() {
                        if($('#skill_name option:selected').text() == $(this).text()){
                            $('#skill-group').after('<p class="my-error-class text-danger" id="skill_error">Skills can not be duplicate</p>')
                            status = 1;
                        };
                    });
                    if(status == 0){
                        post(skillCreateUrl, JSON.stringify(data), loadProfSkillsCreateUpdate);
                        $(this).addClass("update-skill");
                    }


                }
            });




            autoSuggesionCompany('/api/company/search/', "company_text");
            autoSuggesion('/api/professional/institute/search/', "institution_text");
            autoSuggesion('/api/professional/major/', "major_text");
            autoSuggesion('/api/qualification/list', "degree_text");
            autoSuggesion('/api/professional/membership_organization/search/', "membership_organization");
            autoSuggesion('/api/professional/certifying_organization/search/', "certification_organization");
            // // datepicker on the date inputs
            // $( ".datepicker" ).datepicker({
            //   autoclose: false,
            //   todayHighlight: true,
            //   dateFormat: 'dd/mm/yy'
            // }).on('change', function() {
            // $(this).valid();  // triggers a validation test
            // // $(this) refers to $('#eventDate')
            // });

            // $("#start_date_mbr").datepicker({
            //     numberOfMonths: 2,
            //     autoclose: false,
            //     todayHighlight: true,
            //     dateFormat: 'dd/mm/yy',
            //     onSelect: function(selected) {
            //       $("#end_date_mbr").datepicker("option","minDate", selected)
            //     }
            // });
            // $("#end_date_mbr").datepicker({
            //     numberOfMonths: 2,
            //     autoclose: false,
            //     todayHighlight: true,
            //     dateFormat: 'dd/mm/yy',
            //     onSelect: function(selected) {
            //        $("#start_date_mbr").datepicker("option","maxDate", selected)
            //     }
            // });


            // $('#add-experience').on('click', function (event) {
            //   event.preventDefault();
            //   var count = divCounter("input-block-experience")+1;
            //   var lastDiv = $("#experience-form .input-block-experience:last");
            //   var lastDivHtml = $("#experience-form .input-block-experience").html();
            //   lastDiv.after('<div class="input-block-wrap input-block-experience" >'+lastDivHtml+'</div>');
            //   $(".experience-div-label:last").text("0"+ count);
            // });

            datepickerValidation("start_date_mbr", "end_date_mbr");
            datepickerValidation("start_date", "end_date");
            datepickerValidation("enrolled_date", "graduation_date");
            datepickerValidation("issue_date", "expiry_date");

            $("#social-update-form").on('submit',function(event){
                event.preventDefault();
                var facebook_url = $(this).find("#facebook_id").val();
                var twitter_url = $(this).find("#twitter_id").val();
                var linkedin_url = $(this).find("#linkedin_id").val();
                data = {}
                if (facebook_url){
                    data.facebook_id = facebook_url;
                }else{
                    data.facebook_id = '';
                }
                if (twitter_url){
                    data.twitter_id = twitter_url;
                }else{
                    data.twitter_id = '';
                }
                if (linkedin_url){
                    data.linkedin_id = linkedin_url;
                }else{
                    data.linkedin_id = '';
                }
                social_update_url = '/api/professional/profile_update_partial/'
                if(Object.keys(data).length>1 && $(this).valid()){
                    put(social_update_url, JSON.stringify(data), socialCallback);
                }
            });

            $('#reference-form').on('submit', function (event) {
                event.preventDefault();
                var description=$(this).find('#ref-description').val();
                var ref_id=$(this).find('#id').val();
                data = {}
                if(description){
                    data.description = description;
                }
                refCreateUrl = "/api/professional/professional_reference/";
                refUpdateUrl = "/api/professional/professional_reference/"+ref_id+"/";
                if(Object.keys(data).length>0 && $(this).valid() && ref_id){
                    put(refUpdateUrl, JSON.stringify(data), loadReference);
                }
                if(Object.keys(data).length>0 && $(this).valid() && !ref_id){
                    post(refCreateUrl, JSON.stringify(data), loadReference);
                }
            });

            $('#info-update-form').on('submit',function (event) {
                event.preventDefault();
                var about_me = $(this).find('#about_me').val();
                var industry_expertise = $(this).find('#industry_expertise').val();
                var status = $(this).find('#status').val();
                var current_location = $(this).find('#current_location').val();
                var experience = $(this).find('#experience').val();
                var expected_salary_min = $(this).find('#expected_salary_min').val();
                var expected_salary_max = $(this).find('#expected_salary_max').val();
                var qualification = $(this).find('#qualification').val();
                var phone = $(this).find('#phone').val();
                var current_company = $(this).find('#current_company').val();
                var current_designation = $(this).find('#current_designation').val();
                console.log(designation)
                data = {}
                if(about_me){
                    data.about_me = about_me;
                }else{
                    data.about_me = '';
                }
                if(industry_expertise){
                    data.industry_expertise = industry_expertise;
                }else{
                    data.industry_expertise = '';
                }
                if(status){
                    data.status = status;
                }else{
                    data.status = '';
                }
                if(current_location){
                    data.current_location = current_location;
                }else{
                    data.current_location = '';
                }
                if(experience){
                    data.experience = experience;
                }else{
                    data.experience = '';
                }
                if(qualification){
                    data.qualification = qualification;
                }else{
                    data.qualification = '';
                }
                if(expected_salary_min && expected_salary_max){
                    data.expected_salary_min =expected_salary_min;
                    data.expected_salary_max = expected_salary_max;
                }else if(expected_salary_min && !expected_salary_max){
                    data.expected_salary_min =expected_salary_min;
                    data.expected_salary_max = null;
                }else if(!expected_salary_min && expected_salary_max){
                    data.expected_salary_min = null;
                    data.expected_salary_max = expected_salary_max;
                }else{
                    data.expected_salary_min = null;
                    data.expected_salary_max = null;
                }
                if(phone){
                    data.phone = phone;
                }else{
                    data.phone = '';
                }
                if(current_company){
                    data.current_company = current_company;
                }else{
                    data.current_company = '';
                }
                if(current_designation){
                    data.current_designation = current_designation;
                }else{
                    data.current_designation = '';
                }
                basic_info_update_url = '/api/professional/profile_update_partial/';
                if(Object.keys(data).length>1 && $(this).valid()){
                    put(basic_info_update_url, JSON.stringify(data), aboutCallback);
                }

            });
            $('#details-update-form').on('submit',function (event) {
                event.preventDefault();
                var full_name = $(this).find('#full_name').val();
                var father_name = $(this).find('#father_name').val();
                var mother_name = $(this).find('#mother_name').val();
                var date_of_birth = $(this).find('#date_of_birth').val();
                var nationality = $(this).find('#nationality').val();
                var gender = $(this).find('#gender').val();
                var religion = $(this).find('#religion').val();
                var blood_group = $(this).find('#blood_group').val();
                var address = $(this).find('#address').val();
                var permanent_address = $(this).find('#permanent_address').val();
                data = {};
                if(full_name){
                    data.full_name = full_name;
                }else{
                    data.full_name = '';
                }
                if(father_name){
                    data.father_name = father_name;
                }else{
                    data.father_name = '';
                }
                if(mother_name){
                    data.mother_name = mother_name;
                }else{
                    data.mother_name = '';
                }
                if(nationality){
                    data.nationality = nationality;
                }else{
                    data.nationality = '';
                }
                if(gender){
                    data.gender = gender;
                }else{
                    data.gender = '';
                }
                if(religion){
                    data.religion = religion;
                }else{
                    data.religion = '';
                }
                if(blood_group){
                    data.blood_group = blood_group;
                }else{
                    data.blood_group = '';
                }
                if(address){
                    data.address = address;
                }else{
                    data.address = '';
                }
                if(permanent_address){
                    data.permanent_address = permanent_address;
                }else{
                    data.permanent_address = '';
                }
                if(date_of_birth){
                    var momentObj = moment(date_of_birth, 'DD-MM-YYYY');
                    var dateStartString = momentObj.format('YYYY-MM-DD');
                    data.date_of_birth = dateStartString;
                }else{
                    data.date_of_birth = null;
                }

                personal_detail_update_url = '/api/professional/profile_update_partial/';
                if(Object.keys(data).length>1 && $(this).valid()){
                    put(personal_detail_update_url, JSON.stringify(data), personalCallback);
                }


            });

            $('#experience-form').on('submit', function (event) {
                event.preventDefault();
                var company_text=$(this).find('#company_text').val();
                var company=$(this).find('#company_name').val();
                var designation=$(this).find('#designation').val();
                var description=$(this).find('#wexp-description').val();
                var start_date=$(this).find('#start_date').val();
                var end_date=$(this).find('#end_date').val();
                var exp_id=$(this).find('#id').val();
                var is_currently_working = $(this).find('#is_currently_working').is(':checked');
                data = {}
                if(company_text){
                    // data.company_id = company;
                    data.company_text = company_text;
                }
                if (company){
                    data.company_id = company;
                }
                if(designation){
                    data.designation = designation;
                }
                if(description){
                    data.description = description;
                }else{
                    data.description = '';
                }
                if(start_date){
                    var momentObj = moment(start_date, 'DD-MM-YYYY');
                    var dateStartString = momentObj.format('YYYY-MM-DD');
                    data.start_date = dateStartString;
                }
                if(is_currently_working){
                    data.is_currently_working = is_currently_working
                    data.end_date = null;
                }
                else{
                    var momentEndObj = moment(end_date, 'DD-MM-YYYY');
                    var dateEndString = momentEndObj.format('YYYY-MM-DD');
                    data.end_date = dateEndString;
                    data.is_currently_working = false
                }
                expCreateUrl = "/api/professional/professional_work_experience/";
                expUpdateUrl = "/api/professional/professional_work_experience/"+exp_id+"/";
                if(Object.keys(data).length>1 && $(this).valid() && exp_id){
                    put(expUpdateUrl, JSON.stringify(data), loadExperience);
                }
                if(Object.keys(data).length>1 && $(this).valid() && !exp_id){
                    post(expCreateUrl, JSON.stringify(data), loadExperience);
                }
            });

            $('#portfolio-form').on('submit', function (event) {
                event.preventDefault();
                var name=$(this).find('#name').val();
                var description=$(this).find('#port-description').val();
                var image=$(this).find('#image').attr('src');
                var portfolio_id=$(this).find('#id').val();
                data = {}
                if(name){
                    data.name = name;
                }
                if(description){
                    data.description = description;
                }else{
                    data.description = '';
                }
                if(image){
                    data.image = image;
                }
                portfolioCreateUrl = "/api/professional/professional_portfolio/";
                portfolioUpdateUrl = "/api/professional/professional_portfolio/"+portfolio_id+"/";
                if(Object.keys(data).length>1 && $(this).valid() && portfolio_id){
                    put(portfolioUpdateUrl, JSON.stringify(data), loadPortfolioCreateUpdate);
                }
                if(Object.keys(data).length>1 && $(this).valid() && !portfolio_id){
                    post(portfolioCreateUrl, JSON.stringify(data), loadPortfolioCreateUpdate);
                }
            });

            $('#membership-form').on('submit', function (event) {
                event.preventDefault();
                var organization=$(this).find('#membership_organization').val();
                var organization_key=$(this).find('#organization_key').val();
                var position_held=$(this).find('#position_held').val();
                var description=$(this).find('#mbr-description').val();
                var start_date=$(this).find('#start_date_mbr').val();
                var end_date=$(this).find('#end_date_mbr').val();
                var mem_id=$(this).find('#id').val();
                var membership_ongoing = $(this).find('#membership_ongoing').is(':checked');
                data = {}
                if(organization){
                    data.organization = organization;
                }
                if(organization_key){
                    data.organization_key_id = organization_key;
                }
                if(position_held){
                    data.position_held = position_held;
                }
                if(description){
                    data.description = description;
                }else{
                    data.description = '';
                }
                if(start_date){
                    var momentObj = moment(start_date, 'DD-MM-YYYY');
                    var dateStartString = momentObj.format('YYYY-MM-DD');
                    data.start_date = dateStartString;
                }
                if(membership_ongoing){
                    data.membership_ongoing = membership_ongoing
                    data.end_date = null;
                }
                else{
                    var momentEndObj = moment(end_date, 'DD-MM-YYYY');
                    var dateEndString = momentEndObj.format('YYYY-MM-DD');
                    data.end_date = dateEndString;
                    data.membership_ongoing = false
                }
                memCreateUrl = "/api/professional/professional_membership/";
                memUpdateUrl = "/api/professional/professional_membership/"+mem_id+"/";
                if(Object.keys(data).length>1 && $(this).valid() && mem_id){
                    put(memUpdateUrl, JSON.stringify(data), loadMembership);
                }
                if(Object.keys(data).length>1 && $(this).valid() && !mem_id){
                    post(memCreateUrl, JSON.stringify(data), loadMembership);
                }
            });

            $('#education-form').on('submit', function (event) {
                event.preventDefault();
                var degree_text=$(this).find('#degree_text').val();
                var education_level=$(this).find('#education_level').val();
                var edu_id=$(this).find('#id').val();
                var institution=$(this).find('#institution_id').val();
                var institution_text=$(this).find('#institution_text').val();
                var cgpa=$(this).find('#cgpa').val();
                var major=$(this).find('#major').val();
                var major_text=$(this).find('#major_text').val();
                var enrolled_date=$(this).find('#enrolled_date').val();
                var graduation_date=$(this).find('#graduation_date').val();
                var is_ongoing = $(this).find('#is_ongoing').is(':checked');
                var description = $(this).find('#edu-description').val()
                data = {}
                if(degree_text){
                    data.degree_text = degree_text;
                }

                if(education_level){
                    data.education_level_id = education_level;
                }
                if(institution){
                    data.institution_id = institution;
                }
                if(institution_text){
                    data.institution_text = institution_text;
                }
                if(cgpa){
                    data.cgpa = cgpa;
                }
                if(major){
                    data.major_id = major;
                }
                if(major_text){
                    data.major_text = major_text;
                }
                if(description){
                    data.description = description;
                }else{
                    data.description = '';
                }
                if(enrolled_date){
                    var momentObj = moment(enrolled_date, 'DD-MM-YYYY');
                    var dateEnrolledString = momentObj.format('YYYY-MM-DD');
                    data.enrolled_date = dateEnrolledString;
                }
                if(is_ongoing){
                    data.is_ongoing = is_ongoing
                }
                else{
                    var momentGraduationObj = moment(graduation_date, 'DD-MM-YYYY');
                    var dateGraduationString = momentGraduationObj.format('YYYY-MM-DD');
                    data.graduation_date = dateGraduationString;
                    data.is_ongoing = false
                }
                eduCreateUrl = "/api/professional/professional_education/";
                eduUpdateUrl = "/api/professional/professional_education/"+edu_id+"/";
                if(Object.keys(data).length>1 && $(this).valid() && edu_id){
                    put(eduUpdateUrl, JSON.stringify(data), loadEducation);
                }
                if(Object.keys(data).length>1 && $(this).valid() && !edu_id){
                    post(eduCreateUrl, JSON.stringify(data), loadEducation);
                }
            })

            $('#certification-form').on('submit', function (event) {
                event.preventDefault();
                var certificate_name=$(this).find('#certificate_name').val();
                var cer_id=$(this).find('#id').val();
                var organization=$(this).find('#certification_organization').val();
                var organization_key=$(this).find('#certification_key').val();
                var credential_id=$(this).find('#credential_id').val();
                var credential_url=$(this).find('#credential_url').val();
                var issue_date=$(this).find('#issue_date').val();
                var expiry_date=$(this).find('#expiry_date').val();
                var has_expiry_period = $(this).find('#has_expiry_period').is(':checked');
                data = {}
                if(certificate_name){
                    data.certificate_name = certificate_name;
                }
                if(credential_id){
                    data.credential_id = credential_id;
                }
                if(organization){
                    data.organization = organization;
                }
                if(organization_key){
                    data.organization_key_id = organization_key;
                }
                if(credential_url){
                    data.credential_url = credential_url;
                }
                if(issue_date){
                    var momentObj = moment(issue_date, 'DD-MM-YYYY');
                    var dateIssueString = momentObj.format('YYYY-MM-DD');
                    data.issue_date = dateIssueString;
                }
                if(has_expiry_period){
                    data.has_expiry_period = has_expiry_period
                    var momentExpiryObj = moment(expiry_date, 'DD-MM-YYYY');
                    var dateExpiryString = momentExpiryObj.format('YYYY-MM-DD');
                    data.expiry_date = dateExpiryString;
                }
                else {
                    data.has_expiry_period = false
                    data.expiry_date = null
                }
                cerCreateUrl = " /api/professional/professional_certification/";
                cerUpdateUrl = "/api/professional/professional_certification/"+cer_id+"/";
                if(Object.keys(data).length>1 && $(this).valid() && cer_id){
                    put(cerUpdateUrl, JSON.stringify(data), loadCertificates);
                }
                if(Object.keys(data).length>1 && $(this).valid() && !cer_id){
                    post(cerCreateUrl, JSON.stringify(data), loadCertificates);
                }
            })

            $.validator.addMethod("gre",
                function (value, element, param) {
                    var $otherElement = $(param);
                    if(parseInt(value) >0){
                        return parseInt(value, 10) > parseInt($otherElement.val(), 10);
                    }else{
                        return true;
                    }
                }, "Must be greater than minimum expected salary.");


            $.validator.addMethod("greaterThan",
                function (value, element, param) {
                    var end_date = value;
                    var start_date = $(param).val();
                    var valid = false;
                    if (start_date) {
                        var start_date = start_date.split('/').reverse().join("/").replace(/\//g,'');
                        start_date = parseInt(start_date);
                    }
                    if (end_date) {
                        var end_date = end_date.split('/').reverse().join("/").replace(/\//g,'');
                        end_date = parseInt(end_date);
                    }
                    if (start_date && end_date && start_date < end_date){
                        valid = true;
                    }else {
                        valid = false;
                    }
                    return valid;
                },'Must be greater than Enrolled Date.');

            $.validator.addMethod("greater",
                function (value, element, param) {
                    var end_date = value;
                    var start_date = $(param).val();
                    var valid = false;
                    if (start_date) {
                        var start_date = start_date.split('/').reverse().join("/").replace(/\//g,'');
                        start_date = parseInt(start_date);
                    }
                    if (end_date) {
                        var end_date = end_date.split('/').reverse().join("/").replace(/\//g,'');
                        end_date = parseInt(end_date);
                    }
                    if (start_date && end_date && start_date < end_date){
                        valid = true;
                    }else {
                        valid = false;
                    }
                    return valid;
                },'Must be greater than Start Date.');

            $.validator.addMethod("startDate",
                function (value, element, param) {
                    var end_date = value;
                    var start_date = $(param).val();
                    var valid = false;
                    if (start_date) {
                        var start_date = start_date.split('/').reverse().join("/").replace(/\//g,'');
                        start_date = parseInt(start_date);
                    }
                    if (end_date) {
                        var end_date = end_date.split('/').reverse().join("/").replace(/\//g,'');
                        end_date = parseInt(end_date);
                    }
                    if (start_date && end_date && start_date < end_date){
                        valid = true;
                    }else {
                        valid = false;
                    }
                    return valid;
                },'Must be less than End Date.');


            $.validator.addMethod("expiry_greater",
                function (value, element, param) {
                    var end_date = value;
                    var start_date = $(param).val();
                    var valid = false;
                    if (start_date) {
                        var start_date = start_date.split('/').reverse().join("/").replace(/\//g,'');
                        start_date = parseInt(start_date);
                    }
                    if (end_date) {
                        var end_date = end_date.split('/').reverse().join("/").replace(/\//g,'');
                        end_date = parseInt(end_date);
                    }
                    if (start_date && end_date && start_date < end_date){
                        valid = true;
                    }else {
                        valid = false;
                    }
                    return valid;
                },'Must be greater than Issue Date.');


            $('.about-me-btn').on('click', function () {
                $("#info-update-form").validate().resetForm();
                get(getUrl,function (data) {
                    json2Form(data.personal_info, "info-update-form");
                });
            });

            $('.personal-details-btn').on('click', function () {
                $("#details-update-form").validate().resetForm();
                get(getUrl,function (data) {
                    if(data.personal_info.date_of_birth != null){
                        var dateString = data.personal_info.date_of_birth;
                        var momentObj = moment(dateString, 'YYYY-MM-DD');
                        var dateMomentString = momentObj.format('DD/MM/YYYY');
                        data.personal_info.date_of_birth = dateMomentString;
                    }else{
                        data.personal_info.date_of_birth = '';
                    }
                    json2Form(data.personal_info, "details-update-form");
                });
            });

            $('.education-div').on('click','.update-education',function () {
                $("#education-form").validate().resetForm();
                var obj_id = $(this).parent().find(".edu-object-id").val()
                var getUrl = '/api/professional/professional_education_object/'+ obj_id + '/';
                get(getUrl, loadEducationObject);
            });

            $('#experience-div').on('click','.update-experience',function () {
                $("#experience-form").validate().resetForm();
                var obj_id = $(this).parent().find(".exp-object-id").val();
                var getUrl = '/api/professional/profile/';
                get(getUrl, loadExperienceObject);
                function loadExperienceObject(data) {
                    for(index=0;index<data.experience_info.length;index++) {
                        if(data.experience_info[index].id==obj_id){
                            if(!data.experience_info[index].end_date){
                                delete data.experience_info[index].end_date
                            }
                            if(data.experience_info[index].end_date){
                                var momentEndObj = moment(data.experience_info[index].end_date, 'YYYY-MM-DD');
                                var dateEndString = momentEndObj.format('DD/MM/YYYY');
                                data.experience_info[index].end_date = dateEndString
                            }
                            var momentObj = moment(data.experience_info[index].start_date, 'YYYY-MM-DD');
                            var dateStartString = momentObj.format('DD/MM/YYYY');
                            data.experience_info[index].start_date = dateStartString

                            if(data.experience_info[index].description){
                                data.experience_info[index]['wexp-description'] = data.experience_info[index].description;
                                delete data.experience_info[index].description;
                            }
                            json2Form(data.experience_info[index], "experience-form")
                            $('#end_date').val('')
                            if(data.experience_info[index].is_currently_working){
                                $('#is_currently_working').prop('checked',true)
                                $('#end_date').prop('disabled',true)
                            }
                        }
                    }
                }
            });

            $('.reference-div').on('click','.update-reference',function () {
                $("#reference-form").validate().resetForm();
                var obj_id = $(this).parent().find(".ref-object-id").val();
                var getUrl = '/api/professional/profile/';
                get(getUrl, loadReferenceObject);
                function loadReferenceObject(data) {
                    console.log(data)
                    for(index=0;index<data.reference_data.length;index++) {
                        if(data.reference_data[index].id==obj_id){

                            if(data.reference_data[index].description){
                                data.reference_data[index]['ref-description'] = data.reference_data[index].description;
                                delete data.reference_data[index].description;
                            }
                            json2Form(data.reference_data[index], "reference-form");
                        }
                    }
                }
            });

            $('#portfolio-div').on('click','.update-portfolio',function () {
                $("#portfolio-form").validate().resetForm();
                var obj_id = $(this).parent().find(".portfolio-object-id").val();
                var getUrl = '/api/professional/profile/';
                get(getUrl, loadPortfolioObject);
                function loadPortfolioObject(data) {
                    for(index=0;index<data.portfolio_info.length;index++) {
                        if(data.portfolio_info[index].id==obj_id){
                            if(data.portfolio_info[index].description){
                                data.portfolio_info[index]['port-description'] = data.portfolio_info[index].description;
                                delete data.portfolio_info[index].description;
                            }
                            json2Form(data.portfolio_info[index], "portfolio-form")
                            if(!data.portfolio_info[index].image){
                                $('.port-photo #image').attr('src','')
                            }else{
                                getBase64Image(data.portfolio_info[index].image,function(base64image){
                                    $('.port-photo #image').attr('src',base64image)
                                });
                            }

                        }
                    }
                }
            });

            function getBase64Image(imgUrl, callback) {
                var img = new Image();

                // onload fires when the image is fully loadded, and has width and height

                img.onload = function(){

                    var canvas = document.createElement("canvas");
                    canvas.width = img.width;
                    canvas.height = img.height;
                    var ctx = canvas.getContext("2d");
                    ctx.drawImage(img, 0, 0);
                    var dataURL = canvas.toDataURL("image/png")
                    callback(dataURL); // the base64 string

                };

                // set attributes and src
                img.setAttribute('crossOrigin', 'anonymous'); //
                img.src = imgUrl;

            }

            $('#certification-div').on('click','.update-certification',function () {
                $("#certification-form").validate().resetForm();
                var obj_id = $(this).parent().find(".cer-object-id").val();
                var getUrl = '/api/professional/profile/';
                get(getUrl, loadCertificateObject);
                function loadCertificateObject(data) {
                    for(index=0;index<data.certification_info.length;index++) {
                        if(data.certification_info[index].id==obj_id){
                            if(!data.certification_info[index].expiry_date){
                                delete data.certification_info[index].expiry_date
                            }
                            if(data.certification_info[index].expiry_date){
                                var momentExpiryObj = moment(data.certification_info[index].expiry_date, 'YYYY-MM-DD');
                                var dateExpiryString = momentExpiryObj.format('DD/MM/YYYY');
                                data.certification_info[index].expiry_date = dateExpiryString
                            }
                            var momentObj = moment(data.certification_info[index].issue_date, 'YYYY-MM-DD');
                            var dateIssueString = momentObj.format('DD/MM/YYYY');
                            data.certification_info[index].issue_date = dateIssueString

                            json2Form(data.certification_info[index], "certification-form")
                            $('#issue_date').val('')
                            $('#certification_organization').val(data.certification_info[index].organization)
                            $('#certification-form #certification_key').val(data.certification_info[index].organization_obj.id)
                            if(data.certification_info[index].has_expiry_period){
                                $('#has_expiry_period').prop('checked',true)
                                $('#expiry_date').prop('disabled',false)
                            }
                            else{
                                $('#has_expiry_period').prop('checked',false)
                                $('#expiry_date').prop('disabled',true)
                            }
                        }
                    }
                }
            });


            $('.education-div').on('click','.delete-education',function () {
                var obj_id = $(this).parent().find(".edu-object-id").val();
                showQuestion('Delete','Do You Want to Delete?', function(){eduDelete(obj_id);});
            });

            $('#experience-div').on('click','.delete-experience',function () {
                var obj_id = $(this).parent().find(".exp-object-id").val();
                showQuestion('Delete','Do You Want to Delete?', function(){expDelete(obj_id);});
            });

            $('.reference-div').on('click','.delete-reference',function () {
                var obj_id = $(this).parent().find(".ref-object-id").val();
                showQuestion('Delete','Do You Want to Delete?', function(){refDelete(obj_id);});
            });

            $('#portfolio-div').on('click','.delete-portfolio',function () {
                var obj_id = $(this).parent().find(".portfolio-object-id").val();
                showQuestion('Delete','Do You Want to Delete?', function(){portfolioDelete(obj_id);});
            });

            $('#certification-div').on('click','.delete-certification',function () {
                var obj_id = $(this).parent().find(".cer-object-id").val();
                showQuestion('Delete','Do You Want to Delete?', function(){cerDelete(obj_id);});
            });

            $('.membership-div').on('click','.delete-membership',function () {
                var obj_id = $(this).parent().find(".mem-object-id").val();
                showQuestion('Delete','Do You Want to Delete?', function(){memDelete(obj_id);});
            });

            $('.membership-div').on('click','.update-membership',function () {
                var obj_id = $(this).parent().find(".mem-object-id").val();
                var getUrl = '/api/professional/profile/';
                get(getUrl, loadMembershipObject);
                function loadMembershipObject(data) {
                    for(index=0;index<data.membership_info.length;index++) {
                        if(data.membership_info[index].id==obj_id){
                            if(!data.membership_info[index].end_date){
                                delete data.membership_info[index].end_date
                            }
                            if(data.membership_info[index].end_date){
                                var momentEndObj = moment(data.membership_info[index].end_date, 'YYYY-MM-DD');
                                var dateEndString = momentEndObj.format('DD/MM/YYYY');
                                data.membership_info[index].end_date = dateEndString
                            }
                            var momentObj = moment(data.membership_info[index].start_date, 'YYYY-MM-DD');
                            var dateStartString = momentObj.format('DD/MM/YYYY');
                            data.membership_info[index].start_date = dateStartString
                            if(data.membership_info[index].description){
                                data.membership_info[index]['mbr-description'] = data.membership_info[index].description;
                                delete data.membership_info[index].description;
                            }
                            json2Form(data.membership_info[index], "membership-form")
                            $('#membership_organization').val(data.membership_info[index].organization)
                            $('#membership-form #organization_key').val(data.membership_info[index].organization_obj.id)
                            if(data.membership_info[index].end_date){
                                $('#end_date_mbr').val(data.membership_info[index].end_date)
                            }
                            $('#start_date_mbr').val(data.membership_info[index].start_date)
                            if(data.membership_info[index].membership_ongoing){
                                $('#membership_ongoing').prop('checked',true);
                                $('#end_date_mbr').prop('disabled',true);
                                $('#end_date_mbr').val('');
                            }else{
                                $('#membership_ongoing').prop('checked',false);
                                $('#end_date_mbr').prop('disabled',false);
                            }
                        }
                    }
                }
            });


            // If social URL is emtpy then add space in value for skipping database data saving problem


            // checking empty string value for about info



            // checking empty string value for personal details

        });

        $("body").delegate("#remove-dob", "click", function(){
            showQuestion('Remove Your Date Of Birth?','Date Of birth will removed permanently!',removeDob,'')
        });
        function removeDob() {
            data = {
                'date_of_birth' : null
            }
            put('/api/professional/profile_update_partial/',JSON.stringify(data), removeSuccess)
        }
        function removeSuccess() {
            $('#date_of_birth').val('');
        }


        // function divCounter(id){
        //   return $('.'+id).length;
        // }
        function  profileUpdateCallback(data){
                 if(data.status == 200){
                     editCookie('image',data.responseJSON.image)
                 }
         }
        function loadData(data) {
            loadsocial(data);
            loadabout(data);
            loadEdu(data);
            loadExp(data);
            loadCer(data);
            loadMbr(data);
            loadProfSkills(data);
            loadPortfolio(data);
            loadRef(data);
            loadProfile(data);
        }
        function  loadProfile(data){
            id = $('form.profile-form-ajax').attr('id');
            json2Form(data.personal_info, id);
            if(data.personal_info.image){
                // $('.image').attr('src', data.personal_info.image)
                getBase64Image(data.personal_info.image,function(base64image){
                    $('.prof-profile-photo .image').attr('src',base64image)
                });
            }
            // $('#full_user_name').text(data.full_name)
            // $('#user_email').text(data.email)
        }

        function getBase64Image(imgUrl, callback) {
            var img = new Image();

            // onload fires when the image is fully loadded, and has width and height

            img.onload = function(){

                var canvas = document.createElement("canvas");
                canvas.width = img.width;
                canvas.height = img.height;
                var ctx = canvas.getContext("2d");
                ctx.drawImage(img, 0, 0);
                var dataURL = canvas.toDataURL("image/png")
                callback(dataURL); // the base64 string

            };

            // set attributes and src
            img.setAttribute('crossOrigin', 'anonymous'); //
            img.src = imgUrl;

        }


        function datepickerValidation(startDate, endDate){

            $('#'+startDate).datepicker({
                autoclose: false,
                todayHighlight: true,
                dateFormat: 'dd/mm/yy',
                changeYear: true,
                changeMonth: true,
                yearRange: "1930:2020",
                onSelect: function(dateStr) {
                    var date = $(this).datepicker('getDate');
                    if (date) {
                        date.setDate(date.getDate() + 1);
                    }
                    $('#'+endDate).datepicker('option', 'minDate', date);
                    $(this).valid();
                }
            });

            $('#date_of_birth').datepicker({
                autoclose: true,
                todayHighlight: true,
                dateFormat: 'dd/mm/yy',
                changeYear: true,
                changeMonth: true,
                yearRange: "1930:2020"
            });

            $('#'+endDate).datepicker({
                autoclose: false,
                todayHighlight: true,
                dateFormat: 'dd/mm/yy',
                changeYear: true,
                changeMonth: true,
                yearRange: "1930:2020",
                onSelect: function (selectedDate) {
                    var date = $(this).datepicker('getDate');
                    if (date) {
                        date.setDate(date.getDate() - 1);
                    }
                    $('#'+startDate).datepicker('option', 'maxDate', date || 0);
                    $(this).valid();
                }
            });

        }



        function autoSuggesion(url, id) {
            var previousItems = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
                queryTokenizer: Bloodhound.tokenizers.whitespace,
                remote: {
                    url: url,
                    prepare: function (query, settings) {
                        settings.url = settings.url + '?name=' + query
                        settings.headers = {
                            "Authorization": "Bearer " + getCookie('access')
                        };

                        return settings;
                    },
                    filter: function(list) {
                        return $.map(list, function(itemname) {
                            return { name: itemname.name, id : itemname.id }; });
                    }
                },
                limit: 5 });
            previousItems.initialize();
            $("#"+id).typeahead({
                    hint: true,
                    highlight: true, /* Enable substring highlighting */
                    minLength: 2 /* Specify minimum characters required for showing result */
                },
                {

                    name: 'previousItems',
                    displayKey: 'name',
                    valueKey: 'name',
                    source: previousItems.ttAdapter()
                });
            if(id == 'institution_text'){
                $("#"+id).on('typeahead:selected', function (e, data) {
                    $('#institution_id').val(data.id);

                });
            }
            if(id == 'membership_organization'){
                $("#"+id).on('typeahead:selected', function (e, data) {
                    $('#organization_key').val(data.id);

                });
            }
            if(id == 'certification_organization'){
                $("#"+id).on('typeahead:selected', function (e, data) {
                    $('#certification_key').val(data.id);

                });
            }
        }

        function autoSuggesionCompany(url, id) {
            var previousItems = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
                queryTokenizer: Bloodhound.tokenizers.whitespace,
                remote: {
                    url: url,
                    prepare: function (query, settings) {
                        settings.url = settings.url + '?name=' + query
                        settings.headers = {
                            "api-key": "96d56aceeb9049debeab628ac760aa11"
                        };

                        return settings;
                    },
                    filter: function(list) {
                        return $.map(list.results, function(itemname) {
                            return { name: itemname.name }; });
                    }
                },
                limit: 5 });

            previousItems.initialize();
            $("#"+id).typeahead({
                    hint: true,
                    highlight: true, /* Enable substring highlighting */
                    minLength: 2 /* Specify minimum characters required for showing result */
                },


                {

                    name: 'previousItems',
                    displayKey: 'name',
                    valueKey: 'name',
                    source: previousItems.ttAdapter()

                });
            $("#"+id).on('typeahead:selected', function (e, data) {
                $('#company_name').val(data.name);

            });
        }

        function loadEducation(data) {
            if(data.status==200){
                var dateString = data.responseJSON.enrolled_date;
                var dateGraduationString = data.responseJSON.graduation_date;
                var major_name = "";
                var institution_name = "";
                var description = "";
                try{
                    if(data.responseJSON.major_obj.name){
                        major_name = data.responseJSON.major_obj.name;
                    }
                }catch (e) {
                    if (e instanceof TypeError) {
                        major_name = "";
                    }
                }

                try {
                    if (data.responseJSON.institution_text) {
                        institution_name = data.responseJSON.institution_text;
                    }
                }catch (e) {
                    if (e instanceof TypeError) {
                        institution_name = "";
                    }
                }
                try {
                    if (data.responseJSON.description) {
                        description = data.responseJSON.description
                    }
                }catch (e) {
                    if (e instanceof TypeError) {
                        description = "";
                    }
                }

                if(data.responseJSON.cgpa){
                    data.responseJSON.cgpa =', CGPA: '+data.responseJSON.cgpa;
                }else {
                    data.responseJSON.cgpa ='';
                }
                if(data.responseJSON.institution_obj) {
                    if(data.responseJSON.institution_obj.image) {
                        institute_image = data.responseJSON.institution_obj.image;
                    }else{
                        institute_image = "/static/images/candidate/Institute.png";
                    }
                }
                else{
                    institute_image = "/static/images/candidate/Institute.png";
                }
                var momentObj = moment(dateString, 'YYYY-MM-DD');
                var momentGraduationObj = moment(dateGraduationString, 'YYYY-MM-DD');
                var dateEnrolledString = momentObj.format('DD/MM/YYYY');
                var dateGraduationString = momentGraduationObj.format('DD/MM/YYYY');

                if(dateGraduationString == "Invalid date" && data.responseJSON.is_ongoing == true){
                    dateGraduationString = "Ongoing";
                }
                $("#modal-education").modal("hide");
                $("#modal-education").find('form')[0].reset();
                $(".graduation-div").show();
                if($('.education-div').find(".education-label").length==0){
                    $('#edu-label').after('<div class="education-label edu-list">'+
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+institute_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +'<input type="hidden" class="edu-object-id" value="'+data.responseJSON.id+'">'+
                        '<span class="study-year">'+dateEnrolledString+' - '+dateGraduationString+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-education delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-education update-icon" data-toggle="modal" data-target="#modal-education">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '<h5>'+data.responseJSON.education_level_obj.name+' in '+data.responseJSON.degree_text+'<span>@'+institution_name+data.responseJSON.cgpa+'</span></h5>'+
                        '<p>'+ description + '</p>'+'</div></div>');
                }
                else {
                    var el = $(".education-div").find("[value='"+ data.responseJSON.id +"']");
                    if(el.length>0 && data.responseJSON.is_archived == true){
                        el.parent().parent().remove()
                    }
                    else if(el.length>0){
                        el.parent().parent().html('<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+institute_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">'+'<input type="hidden" class="edu-object-id" value="'+data.responseJSON.id+'">'+'<span class="study-year">'+dateEnrolledString+' - '+dateGraduationString+'</span>\n' +
                            '<button type="button" class="btn btn-primary edit-resume delete-education delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-education update-icon" data-toggle="modal" data-target="#modal-education">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'+
                            '<h5>'+data.responseJSON.education_level_obj.name+' in '+data.responseJSON.degree_text+'<span>@'+institution_name+data.responseJSON.cgpa+'</span></h5>'+
                            '<p>'+ description + '</p></div>');
                    }
                    else{
                        $('.education-label:last').after('<div class="education-label edu-list">'+
                            '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+institute_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +'<input type="hidden" class="edu-object-id" value="'+data.responseJSON.id+'">'+'<span class="study-year">'+dateEnrolledString+' - '+dateGraduationString+'</span>\n' +
                            '<button type="button" class="btn btn-primary edit-resume delete-education delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+
                            '<button type="button" class="btn btn-primary edit-resume update-education update-icon" data-toggle="modal" data-target="#modal-education">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'+
                            '<h5>'+data.responseJSON.education_level_obj.name+' in '+data.responseJSON.degree_text+'<span>@'+institution_name+data.responseJSON.cgpa+'</span></h5>'+
                            '<p>'+ description + '</p>'+'</div></div>');
                    }
                }
            }else{
                showError("Error Updating")
            }
            feather.replace();
        }

        function loadCertificates(data) {
            if(data.status==200){
                var dateString = data.responseJSON.issue_date;
                var dateExpiryString = data.responseJSON.expiry_date;
                // var major_name = "";
                // var institution_name = "";
                // var description = "";
                // try{
                //   if(data.responseJSON.major_obj.name){
                //   major_name = data.responseJSON.major_obj.name;
                // }
                // }catch (e) {
                //   if (e instanceof TypeError) {
                //     major_name = "";
                //   }
                // }
                //
                // try {
                //   if (data.responseJSON.institution_text) {
                //     institution_name = data.responseJSON.institution_text;
                //   }
                // }catch (e) {
                //   if (e instanceof TypeError) {
                //     institution_name = "";
                //   }
                // }
                // try {
                //   if (data.responseJSON.description) {
                //     description = data.responseJSON.description
                //   }
                // }catch (e) {
                //   if (e instanceof TypeError) {
                //     description = "";
                //   }
                // }
                var momentObj = moment(dateString, 'YYYY-MM-DD');
                var momentExpiryObj = moment(dateExpiryString, 'YYYY-MM-DD');
                var dateIssueString = momentObj.format('DD/MM/YYYY');
                var dateExpString = momentExpiryObj.format('DD/MM/YYYY');

                if(dateExpString == "Invalid date"){
                    dateExpString = "No Expiry Period";
                }
                if(data.responseJSON.organization_obj) {
                    if (data.responseJSON.organization_obj.image) {
                        organization_image = data.responseJSON.organization_obj.image;
                    } else {
                        organization_image = "/static/images/candidate/Organization.png";
                    }
                }else{
                    organization_image = "/static/images/candidate/Organization.png";
                }
                $("#modal-certification").modal("hide");
                $("#modal-certification").find('form')[0].reset();
                // $(".graduation-div").show();
                if($('#certification-div').find(".certification-label").length==0){
                    $('#cer-label').after('<div class="certification-label cer-list">'+
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+organization_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="cer-object-id" value="'+data.responseJSON.id+'">'+
                        '<span class="study-year">'+dateIssueString+' - '+dateExpString+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-certification delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-certification update-icon" data-toggle="modal" data-target="#modal-certification">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '                <h5>'+data.responseJSON.certificate_name+'<span>@'+data.responseJSON.organization+'</span></h5>\n' +
                        '</div></div>');
                }
                else {
                    var el = $("#certification-div").find("[value='"+ data.responseJSON.id +"']");
                    if(el.length>0 && data.responseJSON.is_archived == true){
                        el.parent().parent().remove()
                    }
                    else if(el.length>0){
                        el.parent().parent().html('<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+organization_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                            '<input type="hidden" class="cer-object-id" value="'+data.responseJSON.id+'">'+
                            '<span class="study-year">'+dateIssueString+' - '+dateExpString+'</span>\n' +
                            '<button type="button" class="btn btn-primary edit-resume delete-certification delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-certification update-icon" data-toggle="modal" data-target="#modal-certification">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'+
                            '                <h5>'+data.responseJSON.certificate_name+'<span>@'+data.responseJSON.organization+'</span></h5></div>');
                    }
                    else{
                        $('.certification-label:last').after('<div class="certification-label cer-list">'+
                            '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+organization_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +'<input type="hidden" class="cer-object-id" value="'+data.responseJSON.id+'">'+
                            '<span class="study-year">'+dateIssueString+' - '+dateExpString+'</span>\n' +
                            '<button type="button" class="btn btn-primary edit-resume delete-certification delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-certification update-icon" data-toggle="modal" data-target="#modal-certification">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'+
                            '                <h5>'+data.responseJSON.certificate_name+'<span>@'+data.responseJSON.organization+'</span></h5>\n' +
                            '</div></div>');
                    }
                }
            }else{
                showError("Error Updating")
            }
            feather.replace();
        }


        function loadEducationObject(data) {
            if(!data.edu_info['graduation_date']){
                delete data.edu_info['graduation_date']
            }
            if(data.edu_info['graduation_date']){
                var momentGraduationObj = moment(data.edu_info['graduation_date'], 'YYYY-MM-DD');
                var dateGraduationString = momentGraduationObj.format('DD/MM/YYYY');
                data.edu_info['graduation_date'] = dateGraduationString
            }
            var momentObj = moment(data.edu_info['enrolled_date'], 'YYYY-MM-DD');
            var dateEnrolledString = momentObj.format('DD/MM/YYYY');
            data.edu_info['enrolled_date'] = dateEnrolledString
            if(data.edu_info['description']){
                data.edu_info['edu-description'] = data.edu_info['description'];
                delete data.edu_info['description'];
            }
            json2Form(data.edu_info, "education-form")

            if(data.edu_info['institution']){
                $('#institution_id').val(data.edu_info['institution'])
            }
            $('#graduation_date').val('')
            if(data.edu_info.is_ongoing){
                $('#is_ongoing').prop('checked',true)
                $('#graduation_date').prop('disabled',true)
            }
        }

        function loadSkillObject(data) {
            if(data.skill_info.rating){
                data.skill_info.rating = Number(data.skill_info.rating)
            }
            json2Form(data.skill_info, "pro-skill-form")
            $('#skill_name').attr('readonly', 'readonly');
        }

        function loadExperience(data) {
            if(data.status==200){
                var dateStartString = data.responseJSON.start_date;
                var dateEndString = data.responseJSON.end_date;
                var description = "";

                var momentObj = moment(dateStartString, 'YYYY-MM-DD');
                var momentEndObj = moment(dateEndString, 'YYYY-MM-DD');
                var dateStart = momentObj.format('DD/MM/YYYY');
                var dateEnd = momentEndObj.format('DD/MM/YYYY');
                if(dateEnd == "Invalid date" || dateEnd && data.responseJSON.is_currently_working == true){
                    dateEnd = "Currently Working Here";
                }
                try {
                    if (data.responseJSON.description) {
                        description = data.responseJSON.description
                    }
                }catch (e) {
                    if (e instanceof TypeError) {
                        description = "";
                    }
                }
                if(data.responseJSON.company_obj) {
                    if(data.responseJSON.company_obj.profile_picture) {
                        company_image = data.responseJSON.company_obj.profile_picture;
                    }
                    else{
                        company_image = "/static/images/company/company-logo.png";
                    }
                }
                else{
                    company_image = "/static/images/company/company-logo.png";
                }
                $("#modal-experience").modal("hide");
                $("#modal-experience").find('form')[0].reset();
                if($('#experience-div').find(".experience-section").length==0){
                    $('#exp-label').after('<div class="experience-section exp-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+company_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="exp-object-id" value="'+data.responseJSON.id+'">'+
                        '                <span class="service-year">'+dateStart+' - '+dateEnd+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-experience delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-experience update-icon" data-toggle="modal" data-target="#modal-experience">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '                <h5>'+data.responseJSON.designation+'<span>@'+data.responseJSON.company_text+'</span></h5>\n' +
                        '<p>'+ description + '</p>'+
                        '              </div></div>');
                }
                else {
                    var el = $("#experience-div").find("[value='"+ data.responseJSON.id +"']");
                    if(el.length>0 && data.responseJSON.is_archived == true){
                        el.parent().parent().remove()
                    }
                    else if(el.length>0){
                        el.parent().parent().html('<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+company_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                            '<input type="hidden" class="exp-object-id" value="'+data.responseJSON.id+'">'+
                            '                <span class="service-year">'+dateStart+' - '+dateEnd+'</span>\n' +
                            '<button type="button" class="btn btn-primary edit-resume delete-experience delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-experience update-icon" data-toggle="modal" data-target="#modal-experience">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'+
                            '                <h5>'+data.responseJSON.designation+'<span>@'+data.responseJSON.company_text+'</span></h5>\n' +
                            '<p>'+ description + '</p><div>');
                    }
                    else{
                        $('.experience-section:last').after('<div class="experience-section exp-list">\n' +
                            '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+company_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                            '<input type="hidden" class="exp-object-id" value="'+data.responseJSON.id+'">'+
                            '                <span class="service-year">'+dateStart+' - '+dateEnd+'</span>\n' +
                            '<button type="button" class="btn btn-primary edit-resume delete-experience delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-experience update-icon" data-toggle="modal" data-target="#modal-experience">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'+
                            '                <h5>'+data.responseJSON.designation+'<span>@'+data.responseJSON.company_text+'</span></h5>\n' +
                            '<p>'+ description + '</p>'+
                            '              </div></div>');
                    }

                }
            }else{
                showError("Error Updating")
            }
            feather.replace();
        }

        function loadReference(data) {
            if(data.status==200){
                $("#modal-reference").modal("hide");
                $("#modal-reference").find('form')[0].reset();
                if($('.reference-div').find(".reference-section").length==0){
                    $('#ref-label').after('<div class="reference-section">\n' +
                        '<input type="hidden" class="ref-object-id" value="'+data.responseJSON.id+'">'+
                        '                <span class="service-year">'+data.responseJSON.description+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-reference delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-reference update-icon" data-toggle="modal" data-target="#modal-reference">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '              </div>');
                }
                else {
                    var el = $(".reference-div").find("[value='"+ data.responseJSON.id +"']");
                    if(el.length>0 && data.responseJSON.is_archived == true){
                        el.parent().remove()
                    }
                    else if(el.length>0){
                        el.parent().html('<input type="hidden" class="ref-object-id" value="'+data.responseJSON.id+'">'+
                            '                <span class="service-year">'+data.responseJSON.description+'</span>\n' +
                            '<button type="button" class="btn btn-primary edit-resume delete-reference delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-reference update-icon" data-toggle="modal" data-target="#modal-reference">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'
                            );
                    }
                    else{
                        $('.reference-section:last').after('<div class="reference-section">\n' +
                        '<input type="hidden" class="ref-object-id" value="'+data.responseJSON.id+'">'+
                        '                <span class="service-year">'+data.responseJSON.description+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-reference delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-reference update-icon" data-toggle="modal" data-target="#modal-reference">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '              </div>');
                    }

                }
            }else{
                showError("Error Updating")
            }
            feather.replace();
        }

        function loadPortfolioCreateUpdate(data) {
            if(data.status==200){
                if(data.responseJSON.description == null){
                    description = '';
                }else if(data.responseJSON.description != null){
                    description = data.responseJSON.description;
                }else{
                    description = '';
                }
                if(data.responseJSON.image == null){
                    data.responseJSON.image = '/static/images/candidate/Portfolio.png'
                }
                $("#modal-portfolio").modal("hide");
                $("#modal-portfolio").find('form')[0].reset();
                if($('#portfolio-div').find(".portfolio-section").length==0){
                    $('#port-label').after('<div class="portfolio-section por-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+data.responseJSON.image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">'+
                        '<input type="hidden" class="portfolio-object-id" value="'+data.responseJSON.id+'">'+
                        '                <b class="port-title service-year">'+data.responseJSON.name+'</b>\n'  +
                        '<button type="button" class="btn btn-primary edit-resume delete-portfolio delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-portfolio update-icon" data-toggle="modal" data-target="#modal-portfolio">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '<p>'+ description + '</p>'+
                        '              </div></div');
                }
                else {
                    var el = $("#portfolio-div").find("[value='"+ data.responseJSON.id +"']");
                    if(el.length>0 && data.responseJSON.is_archived == true){
                        el.parent().parent().remove()
                    }
                    else if(el.length>0){
                        el.parent().parent().html('<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+data.responseJSON.image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">'+
                                '<input type="hidden" class="portfolio-object-id" value="'+data.responseJSON.id+'">'+
                            '                <b class="port-title service-year">'+data.responseJSON.name+'</b>\n'  +
                            '<button type="button" class="btn btn-primary edit-resume delete-portfolio delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-portfolio update-icon" data-toggle="modal" data-target="#modal-portfolio">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'+
                            '<p>'+ description + '</p></div>');
                    }
                    else{
                        $('.portfolio-section:last').after('<div class="portfolio-section por-list">\n' +
                            '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+data.responseJSON.image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">'+
                            '<input type="hidden" class="portfolio-object-id" value="'+data.responseJSON.id+'">'+
                            '                <b class="port-title service-year">'+data.responseJSON.name+'</b>\n'  +
                            '<button type="button" class="btn btn-primary edit-resume delete-portfolio delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-portfolio update-icon" data-toggle="modal" data-target="#modal-portfolio">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'+
                            '<p>'+ description + '</p>'+
                            '              </div></div>');
                    }

                }
            }else{
                showError("Error Updating")
            }
            feather.replace();
        }

        function loadMembership(data) {
            if(data.status==200){
                var dateStartString = data.responseJSON.start_date;
                var dateEndString = data.responseJSON.end_date;
                var description = "";

                var momentObj = moment(dateStartString, 'YYYY-MM-DD');
                var momentEndObj = moment(dateEndString, 'YYYY-MM-DD');
                var dateStart = momentObj.format('DD/MM/YYYY');
                var dateEnd = momentEndObj.format('DD/MM/YYYY');
                if(dateEnd == "Invalid date" || dateEnd && data.responseJSON.is_currently_working == true){
                    dateEnd = "Ongoing";
                }
                try {
                    if (data.responseJSON.description) {
                        description = data.responseJSON.description
                    }
                }catch (e) {
                    if (e instanceof TypeError) {
                        description = "";
                    }
                }
                if(data.responseJSON.organization_obj) {
                    if (data.responseJSON.organization_obj.image) {
                        organization_image = data.responseJSON.organization_obj.image;
                    } else {
                        organization_image = "/static/images/candidate/Organization.png";
                    }
                }
                else{
                    organization_image = "/static/images/candidate/Organization.png";
                }

                $("#modal-membership").modal("hide");
                $("#modal-membership").find('form')[0].reset();
                if($('.membership-div').find(".membership-label").length==0){
                    $('#mbr-label').after('<div class="membership-label mem-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+organization_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="mem-object-id" value="'+data.responseJSON.id+'">'+
                        '                <span class="service-year">'+dateStart+' - '+dateEnd+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-membership delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-membership update-icon" data-toggle="modal" data-target="#modal-membership">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '                <h5>'+data.responseJSON.position_held+'<span>@'+data.responseJSON.organization+'</span></h5>\n' +
                        '<p>'+ description + '</p>'+
                        '              </div></div>');
                }
                else {
                    var el = $(".membership-div").find("[value='"+ data.responseJSON.id +"']");
                    if(el.length>0 && data.responseJSON.is_archived == true){
                        el.parent().parent().remove()
                    }
                    else if(el.length>0){
                        el.parent().parent().html('<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+organization_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                            '<input type="hidden" class="mem-object-id" value="'+data.responseJSON.id+'">'+
                            '                <span class="service-year">'+dateStart+' - '+dateEnd+'</span>\n' +
                            '<button type="button" class="btn btn-primary edit-resume delete-membership delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-membership update-icon" data-toggle="modal" data-target="#modal-membership">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'+
                            '                <h5>'+data.responseJSON.position_held+'<span>@'+data.responseJSON.organization+'</span></h5>\n' +
                            '<p>'+ description + '</p></div>');
                    }
                    else{
                        $('.membership-label:last').after('<div class="membership-label mem-list">\n' +
                            '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+organization_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                            '<input type="hidden" class="mem-object-id" value="'+data.responseJSON.id+'">'+
                            '                <span class="service-year">'+dateStart+' - '+dateEnd+'</span>\n' +
                            '<button type="button" class="btn btn-primary edit-resume delete-membership delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-membership update-icon" data-toggle="modal" data-target="#modal-membership">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button>'+
                            '                <h5>'+data.responseJSON.position_held+'<span>@'+data.responseJSON.organization+'</span></h5>\n' +
                            '<p>'+ description + '</p>'+
                            '              </div></div>');
                    }

                }
            }else{
                showError("Error Updating")
            }
            feather.replace();
        }

        function loadProfSkills(data) {
            var skillHtml = $(".skill-label").html();
            for (index = 0; index < data.skill_info.length; index++) {
                var skillDivHtml = $("#pro-skill-form .input-block-skill").html();
                if (index == 0) {
                    $('#skill-label').append('<div class="progress-item skill-label"> <div class="progress-head">' + '<input type="hidden" class="skill-obj-id" value="' + data.skill_info[index].id + '">' +'<p class="progress-on">'+ data.skill_info[index].skill_obj.name +'</p></div>'+
                        '<div class="progress-body"><div class="progress">' + '<div class="progress-bar" role="progressbar" aria-valuenow="'+ data.skill_info[index].rating *10 +'" aria-valuemin="0" aria-valuemax="100" style="width: 0;"></div></div>'+
                        '<p class="progress-to">'+data.skill_info[index].rating + '/10</p></div>'+'<div style="padding-top: 5px"><button type="button" class="btn btn-primary edit-resume delete-skill delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-skill update-icon" data-toggle="modal" data-target="#modal-pro-skill">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button></div>'+'</div>');
                }
                else if(index>=1){
                    $('.skill-label:last').after('<div class="progress-item skill-label"> <div class="progress-head">' + '<input type="hidden" class="skill-obj-id" value="' + data.skill_info[index].id + '">' +'<p class="progress-on">'+ data.skill_info[index].skill_obj.name +'</p></div>'+
                        '<div class="progress-body"><div class="progress">' + '<div class="progress-bar" role="progressbar" aria-valuenow="'+data.skill_info[index].rating *10+'" aria-valuemin="0" aria-valuemax="100" style="width: 0;"></div></div>'+
                        '<p class="progress-to">'+data.skill_info[index].rating + '/10</p> </div>'+'<div style="padding-top: 5px"><button type="button" class="btn btn-primary edit-resume delete-skill delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-skill update-icon" data-toggle="modal" data-target="#modal-pro-skill">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button></div>'+'</div>');

                }
            }
            feather.replace()
        }

        function loadProfSkillsCreateUpdate(data) {
            if(data.status==200){
                $("#modal-pro-skill").modal("hide");
                $("#modal-pro-skill").find('form')[0].reset();
                if($('.professional-skill-div').find(".skill-label").length==0){
                    $('#skill-label').append('<div class="progress-item skill-label"> <div class="progress-head">' + '<input type="hidden" class="skill-obj-id" value="' + data.responseJSON.id + '">' +'<p class="progress-on">'+ data.responseJSON.skill_obj.name +'</p></div>'+
                        '<div class="progress-body"><div class="progress">' + '<div class="progress-bar" role="progressbar" aria-valuenow="'+data.responseJSON.rating *10+'" aria-valuemin="0" aria-valuemax="100" style="width: 0;"></div></div>'+
                        '<p class="progress-to">'+data.responseJSON.rating + '/10</p> </div>'+'<div style="padding-top: 5px"><button type="button" class="btn btn-primary edit-resume delete-skill delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-skill update-icon" data-toggle="modal" data-target="#modal-pro-skill">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button></div>'+'</div>');
                }
                else {
                    var el = $(".professional-skill-div").find("[value='"+ data.responseJSON.id +"']");
                    if(el.length>0 && data.responseJSON.is_archived == true){
                        el.parent().parent().remove()
                    }
                    else if(el.length>0){
                        el.parent().parent().html('<div class="progress-head">' + '<input type="hidden" class="skill-obj-id" value="' + data.responseJSON.id + '">' +'<p class="progress-on">'+ data.responseJSON.skill_obj.name +'</p></div>'+
                            '<div class="progress-body"><div class="progress">' + '<div class="progress-bar" role="progressbar" aria-valuenow="'+data.responseJSON.rating *10+'" aria-valuemin="0" aria-valuemax="100" style="width: 0;"></div></div>'+
                            '<p class="progress-to">'+data.responseJSON.rating + '/10</p> </div>'+'<div style="padding-top: 5px"><button type="button" class="btn btn-primary edit-resume delete-skill delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-skill update-icon" data-toggle="modal" data-target="#modal-pro-skill">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button></div>');
                    }
                    else{
                        $('.skill-label:last').after('<div class="progress-item skill-label"><div class="progress-head">' + '<input type="hidden" class="skill-obj-id" value="' + data.responseJSON.id + '">' +'<p class="progress-on">'+ data.responseJSON.skill_obj.name +'</p></div>'+
                            '<div class="progress-body"><div class="progress">' + '<div class="progress-bar" role="progressbar" aria-valuenow="'+data.responseJSON.rating * 10+'" aria-valuemin="0" aria-valuemax="100" style="width: 0;"></div></div>'+
                            '<p class="progress-to">'+data.responseJSON.rating + '/10</p> </div>'+'<div style="padding-top: 5px"><button type="button" class="btn btn-primary edit-resume delete-skill delete-icon">\n' +
                            '                <i data-feather="trash-2"></i>\n' +
                            '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-skill update-icon" data-toggle="modal" data-target="#modal-pro-skill">\n' +
                            '                <i data-feather="edit-2"></i>\n' +
                            '              </button></div>'+'</div>');
                    }

                }
            }
            feather.replace()
        }

        //load social and append social value
        function  loadsocial(data){
            if(data.personal_info.job_alert_status === true){
                $("#subscribe-text").text('Unsubscribe job alert.');
                $("#job_alert_status").prop('checked', true);
            }else{
                $("#subscribe-text").text('Subscribe for job alert.');
            }

            if(data.personal_info.facebook_id){
                facebook = 'http://facebook.com/'+data.personal_info.facebook_id;
            }
            else{
                facebook = 'http://facebook.com/';
            }

            if(data.personal_info.twitter_id){
                twitter  = 'http://twitter.com/'+data.personal_info.twitter_id;
            }
            else{
                twitter  = 'http://twitter.com/';
            }

            if(data.personal_info.linkedin_id){
                linkedin = 'http://linkedin.com/'+data.personal_info.linkedin_id;
            }
            else linkedin  = 'http://linkedin.com/';
            $('.facebook').attr('href' ,facebook);
            $('.twitter').attr('href',twitter);
            $('.linkedin').attr('href', linkedin);
            $('#facebook_id').val(data.personal_info.facebook_id);
            $('#linkedin_id').val(data.personal_info.twitter_id);
            $('#twitter_id').val(data.personal_info.linkedin_id);
        }
        //appending socials value in callback
        function socialCallback(data) {
            if(data.status==200){
                $("#modal-social").modal("hide");
                facebook = 'http://facebook.com/'+data.responseJSON.facebook_id;
                twitter  = 'https://twitter.com/'+data.responseJSON.twitter_id;
                linkedin = 'https://www.linkedin.com/'+data.responseJSON.linkedin_id;
                $('.facebook').attr('href' ,facebook);
                $('.twitter').attr('href',twitter);
                $('.linkedin').attr('href', linkedin);
            }
            else{
                showError("Error Updating ")
            }

        }

        function loadEdu(data) {
            for(index=0;index<data.edu_info.length;index++){
                var dateString = data.edu_info[index].enrolled_date;
                var dateGraduationString = data.edu_info[index].graduation_date;
                var momentObj = moment(dateString, 'YYYY-MM-DD');
                var momentGraduationObj = moment(dateGraduationString, 'YYYY-MM-DD');
                var dateEnrolledString = momentObj.format('DD/MM/YYYY');
                var dateGraduationString = momentGraduationObj.format('DD/MM/YYYY');
                if(dateEnrolledString == "Invalid date"){
                    dateEnrolledString = "";
                }
                if(dateGraduationString == "Invalid date" && data.edu_info[index].is_ongoing == true){
                    dateGraduationString = "Ongoing";
                }
                if(!data.edu_info[index].description){
                    data.edu_info[index].description =''
                }
                if(data.edu_info[index].cgpa){
                    data.edu_info[index].cgpa =', CGPA: '+data.edu_info[index].cgpa;
                }else {
                    data.edu_info[index].cgpa ='';
                }
                if(data.edu_info[index].institution_obj.image) {
                        institute_image = data.edu_info[index].institution_obj.image;
                    }
                    else{
                        institute_image = "/static/images/candidate/Institute.png";
                    }
                var eduDivHtml = $("#education-form .input-block-edu").html();

                if(index==0){
                    $('#edu-label').after('<div class="education-label edu-list">'+
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+institute_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="edu-object-id" value="'+data.edu_info[index].id+'">'+'<span class="study-year">'+dateEnrolledString+' - '+dateGraduationString+'</span>\n' +'<button type="button" class="btn btn-primary edit-resume delete-education delete-icon" >\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-education update-icon" data-toggle="modal" data-target="#modal-education">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '<h5>'+data.edu_info[index].education_level_obj.name+' in '+data.edu_info[index].degree_text+'<span>@'+data.edu_info[index].institution_text+data.edu_info[index].cgpa+'</span></h5>'+
                        '<p>'+ data.edu_info[index].description + '</p>'+'</div></div>');

                }
                else if(index>=1){
                    $('.education-label:last').after('<div class="education-label edu-list">'+
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+institute_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="edu-object-id" value="'+data.edu_info[index].id+'">'+'<span class="study-year">'+dateEnrolledString+' - '+dateGraduationString+'</span>\n' +'<button type="button" class="btn btn-primary edit-resume delete-education delete-icon" >\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-education update-icon" data-toggle="modal" data-target="#modal-education">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '<h5>'+data.edu_info[index].education_level_obj.name+' in '+data.edu_info[index].degree_text+'<span>@'+data.edu_info[index].institution_text+data.edu_info[index].cgpa+'</span></h5>'+
                        '<p>'+ data.edu_info[index].description + '</p>'+'</div></div>');
                }
                feather.replace();
            }
        }

        function loadExp(data) {
            // var eduHtml = $(".experience-label").html();
            for(index=0;index<data.experience_info.length;index++){
                var dateStartString = data.experience_info[index].start_date;
                var dateEndString = data.experience_info[index].end_date;

                var momentObj = moment(dateStartString, 'YYYY-MM-DD');
                var momentEndObj = moment(dateEndString, 'YYYY-MM-DD');
                var dateStart = momentObj.format('DD/MM/YYYY');
                var dateEnd = momentEndObj.format('DD/MM/YYYY');
                if(dateEnd == "Invalid date" && data.experience_info[index].is_currently_working == true){
                    dateEnd = "Currently Working Here";
                }
                if(data.experience_info[index].company) {
                    if(data.experience_info[index].company.profile_picture) {
                        company_image = data.experience_info[index].company.profile_picture;
                    }
                    else{
                        company_image = "/static/images/company/company-logo.png";
                    }
                }
                else{
                    company_image = "/static/images/company/company-logo.png";
                }
                if(!data.experience_info[index].description){
                    description =''
                }
                else{
                    description = data.experience_info[index].description
                }

                var expDivHtml = $("#experience-form .input-block-experience").html();
                if(index==0){
                    $('#exp-label').after('<div class="experience-section exp-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+company_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="exp-object-id" value="'+data.experience_info[index].id+'">'+
                        '                <span class="service-year">'+dateStart+' - '+dateEnd+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-experience delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-experience update-icon" data-toggle="modal" data-target="#modal-experience">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '                <h5>'+data.experience_info[index].designation+'<span>@'+data.experience_info[index].company_text+'</span></h5>\n' +
                        '<p>'+ description + '</p>'+
                        '              </div></div>');
                }
                else if(index>=1){
                    $('.experience-section:last').after('<div class="experience-section exp-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+company_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="exp-object-id" value="'+data.experience_info[index].id+'">'+
                        '                <span class="service-year">'+dateStart+' - '+dateEnd+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-experience delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-experience update-icon" data-toggle="modal" data-target="#modal-experience">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+

                        '                <h5>'+data.experience_info[index].designation+'<span>@'+data.experience_info[index].company_text+'</span></h5>\n' +
                        '<p>'+ description + '</p>'+
                        '              </div></div>');
                }
                feather.replace();
            }
        }

        function loadRef(data) {
            console.log(data)
            for(index=0;index<data.reference_data.length;index++){

                {#var refDivHtml = $("#reference-form .input-block-experience").html();#}
                if(index==0){
                    $('#ref-label').after('<div class="reference-section">\n' +
                        '<input type="hidden" class="ref-object-id" value="'+data.reference_data[index].id+'">'+
                        '                <span class="service-year">'+data.reference_data[index].description+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-reference delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-reference update-icon" data-toggle="modal" data-target="#modal-reference">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '              </div>');
                }
                else if(index>=1){
                    $('.reference-section:last').after('<div class="reference-section">\n' +
                        '<input type="hidden" class="ref-object-id" value="'+data.reference_data[index].id+'">'+
                        '                <span class="service-year">'+data.reference_data[index].description+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-reference delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-reference update-icon" data-toggle="modal" data-target="#modal-reference">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '              </div>');
                }
                feather.replace();
            }
        }

        function loadPortfolio(data) {
            // var eduHtml = $(".experience-label").html();
            console.log(data.portfolio_info)
            for(index=0;index<data.portfolio_info.length;index++){
                if(data.portfolio_info[index].description ==null){
                    data.portfolio_info[index].description = '';
                }
                if(data.portfolio_info[index].image == null){
                    data.portfolio_info[index].image = '/static/images/candidate/Portfolio.png'
                }
                var expDivHtml = $("#experience-form .input-block-experience").html();
                if(index==0){
                    $('#port-label').after('<div class="portfolio-section por-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+data.portfolio_info[index].image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">'+
                        '<input type="hidden" class="portfolio-object-id" value="'+data.portfolio_info[index].id+'">'+
                        '                <b class="port-title service-year">'+data.portfolio_info[index].name+'</b>\n'  +
                        '<button type="button" class="btn btn-primary edit-resume delete-portfolio delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-portfolio update-icon" data-toggle="modal" data-target="#modal-portfolio">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '<p>'+ data.portfolio_info[index].description + '</p>'+
                        '              </div></div>');
                }
                else if(index>=1){
                    $('.portfolio-section:last').after('<div class="portfolio-section por-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+data.portfolio_info[index].image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">'+
                        '<input type="hidden" class="portfolio-object-id" value="'+data.portfolio_info[index].id+'">'+
                        '                <b class="port-title service-year">'+data.portfolio_info[index].name+'</b>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-portfolio delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-portfolio update-icon" data-toggle="modal" data-target="#modal-portfolio">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '<p>'+ data.portfolio_info[index].description + '</p>'+
                        '              </div></div>');
                }
                feather.replace();
            }
        }

        function loadCer(data) {
            // var eduHtml = $(".experience-label").html();
            for(index=0;index<data.certification_info.length;index++){
                var dateIssueString = data.certification_info[index].issue_date;
                var dateExpiryString = data.certification_info[index].expiry_date;

                var momentObj = moment(dateIssueString, 'YYYY-MM-DD');
                var momentExpiryObj = moment(dateExpiryString, 'YYYY-MM-DD');
                var dateIssue = momentObj.format('DD/MM/YYYY');
                var dateExpiry = momentExpiryObj.format('DD/MM/YYYY');

                if(dateExpiry == "Invalid date" && data.certification_info[index].has_expiry_period == false){
                    dateExpiry = "No Expiry Period";
                }
                if(data.certification_info[index].organization_obj.image) {
                        organization_image = data.certification_info[index].organization_obj.image;
                    }
                    else{
                        organization_image = "/static/images/candidate/Organization.png";
                    }
                // if(!data.certification_info[index].description){
                //     description =''
                // }

                // var expDivHtml = $("#experience-form .input-block-experience").html();
                if(index==0){
                    $('#cer-label').after('<div class="certification-label cer-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+organization_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="cer-object-id" value="'+data.certification_info[index].id+'">'+
                        '                <span class="service-year">'+dateIssue+' - '+dateExpiry+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-certification delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-certification update-icon" data-toggle="modal" data-target="#modal-certification">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '                <h5>'+data.certification_info[index].certificate_name+'<span>@'+data.certification_info[index].organization+'</span></h5>\n' +
                        '              </div></div>');
                }
                else if(index>=1){
                    $('.certification-label:last').after('<div class="certification-label cer-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+organization_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="cer-object-id" value="'+data.certification_info[index].id+'">'+
                        '                <span class="service-year">'+dateIssue+' - '+dateExpiry+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-certification delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-certification update-icon" data-toggle="modal" data-target="#modal-certification">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '                <h5>'+data.certification_info[index].certificate_name+'<span>@'+data.certification_info[index].organization+'</span></h5>\n' +
                        '              </div></div>');
                }
                feather.replace();
            }
        }

        function loadMbr(data) {
            // var eduHtml = $(".experience-label").html();
            for(index=0;index<data.membership_info.length;index++){
                var dateStartString = data.membership_info[index].start_date;
                var dateEndString = data.membership_info[index].end_date;

                var momentObj = moment(dateStartString, 'YYYY-MM-DD');
                var momentEndObj = moment(dateEndString, 'YYYY-MM-DD');
                var dateStart = momentObj.format('DD/MM/YYYY');
                var dateEnd = momentEndObj.format('DD/MM/YYYY');

                if(dateEnd == "Invalid date" && data.membership_info[index].membership_ongoing == true){
                    dateEnd = "Ongoing";
                }
                if(!data.membership_info[index].description){
                    description = '';
                }else{
                    description = data.membership_info[index].description;
                }
                if(data.membership_info[index].organization_obj.image) {
                        organization_image = data.membership_info[index].organization_obj.image;
                    }
                    else{
                        organization_image = "/static/images/candidate/Organization.png";
                    }

                // var expDivHtml = $("#experience-form .input-block-experience").html();
                if(index==0){
                    $('#mbr-label').after('<div class="membership-label mem-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+organization_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="mem-object-id" value="'+data.membership_info[index].id+'">'+
                        '                <span class="service-year">'+dateStart+' - '+dateEnd+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-membership delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-membership update-icon" data-toggle="modal" data-target="#modal-membership">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '                <h5>'+data.membership_info[index].position_held+'<span>@'+data.membership_info[index].organization+'</span></h5>\n' +
                        '<p>'+ description + '</p>'+
                        '              </div></div>');
                }
                else if(index>=1){
                    $('.membership-label:last').after('<div class="membership-label mem-list">\n' +
                        '<div class="thumb">\n' +
                    '<a href="#">\n' +
                    '<img src="'+organization_image+'" class="img-fluid" alt="">\n' +
                    '</a>\n' +
                    '</div>'+
                        '<div class="body">' +
                        '<input type="hidden" class="mem-object-id" value="'+data.membership_info[index].id+'">'+
                        '                <span class="service-year">'+dateStart+' - '+dateEnd+'</span>\n' +
                        '<button type="button" class="btn btn-primary edit-resume delete-membership delete-icon">\n' +
                        '                <i data-feather="trash-2"></i>\n' +
                        '              </button>'+'<button type="button" class="btn btn-primary edit-resume update-membership update-icon" data-toggle="modal" data-target="#modal-membership">\n' +
                        '                <i data-feather="edit-2"></i>\n' +
                        '              </button>'+
                        '                <h5>'+data.membership_info[index].position_held+'<span>@'+data.membership_info[index].organization+'</span></h5>\n' +
                        '<p>'+ description + '</p>'+
                        '              </div></div>');
                }
                feather.replace();
            }
        }

        function loadExpEdit(data) {
            setTimeout(function () {
                var count = 2;
                for(index=0;index<data.experience_info.length;index++){
                    if(index==0){
                        $('.exp-01 #company_id').val(data.experience_info[index].company);
                    }
                    else if(index>=1){
                        $(".exp-0"+count+" #company_id").val(data.experience_info[index].company);
                        count = count+1;
                    }
                }
            },500)
        }

        function json2FormDiv(data, id){
            for(key in data){
                var el = $("." + id).find("[id='"+ key +"']");
                let elChild = el;
                let dataValue = data[key];
                if(el.hasClass("tinymce-editor")){
                    tinymce.get(key).insertContent(data[key]);
                }
                else if(el.data("parent")){
                    setTimeout(function () {
                        elChild.val(dataValue).change();
                    },1000);
                }
                setTimeout(function () {
                    elChild.val(dataValue).change();
                },500);

            }
        }


        // load personal_info about and personal details data and append here
        function  loadabout(data){




            {#json2Form(data.personal_info, "info-update-form");#}
            if (!data.personal_info.experience){
                data.personal_info.experience= "";
            }
            else{
                if(data.personal_info.experience == 1){
                    data.personal_info.experience = data.personal_info.experience + " year"
                }
                else {
                    data.personal_info.experience = data.personal_info.experience + " years"
                }

            }



            container = $('#about-details-div');
            json2DivPopulate(data.personal_info, container);
            if(data.personal_info.date_of_birth != null){
                var dateString = data.personal_info.date_of_birth;
                var momentObj = moment(dateString, 'YYYY-MM-DD');
                var dateMomentString = momentObj.format('DD/MM/YYYY');
                data.personal_info.do_birth = dateMomentString;
            }else{
                data.personal_info.do_birth = '';
            }

            container_personal = $('#personal-information-div');
            data.personal_info.religion = data.personal_info.religion_obj.name;
            json2DivPopulate(data.personal_info, container_personal);
            data.personal_info.date_of_birth = dateMomentString;
            //json2Form(data.personal_info, "details-update-form");
            $('#nationality').html(data.personal_info.nationality_obj.name);
        }


        function aboutCallback(data) {
            if(data.status==200){
                var obj = data.responseJSON;
                obj['salary_min']=data.responseJSON.expected_salary_min;
                obj['salary_max']=data.responseJSON.expected_salary_max;

                $("#modal-about-me").modal("hide");
                if (obj['salary_min']){
                    obj['salary_min'] = 'BDT '+Number(obj['salary_min']).toLocaleString('en')+' - ';
                }
                else{
                    data.responseJSON.expected_salary_min = ''
                }
                if(obj['salary_max']){
                    obj['salary_max'] = Number(obj['salary_max']).toLocaleString('en');
                }
                else{
                    obj['salary_max'] = ''
                }
                if (!obj.experience){
                    obj.experience= "";
                }
                else{
                    if(obj.experience == 1){
                        obj.experience = obj.experience + " year"
                    }
                    else {
                        obj.experience = obj.experience + " years"
                    }

                }
                container = $('#about-details-div');
                json2DivPopulate(obj, container);
            }else{
                showError("Error Updating ")
            }

        }

        function personalCallback(data) {
            if(data.status==200){
                $("#modal-personal-details").modal("hide");
                container = $('#personal-information-div');
                if(data.responseJSON.date_of_birth != null){
                    var dateString = data.responseJSON.date_of_birth;
                    var momentObj = moment(dateString, 'YYYY-MM-DD');
                    var dateMomentString = momentObj.format('DD/MM/YYYY');
                    data.responseJSON.do_birth = dateMomentString;
                }else{
                    data.responseJSON.do_birth = '';
                }
                if(data.responseJSON.religion_obj) {
                    data.responseJSON.religion = data.responseJSON.religion_obj.name;
                }
                json2DivPopulate(data.responseJSON, container);
                if(data.responseJSON.nationality_obj) {
                    $('#nationality').html(data.responseJSON.nationality_obj.name);
                }
            }else{
                showError("Error Updating ")
            }

        }


        // static value of social url appending here
        function  loadstatic(data){
            $("#fb").text(data[1]);
            $("#tw").text(data[2]);
            $("#ln").text(data[3]);
        }


        function eduDelete(obj_id) {
            var path = window.location.pathname.split('/');
            var id = path[path.length-2];
            var obj_id = obj_id
            eduUpdateUrl = "/api/professional/professional_education/"+obj_id+"/";
            data={
                'is_archived':true
            }
            put(eduUpdateUrl, JSON.stringify(data), loadEducation);
        }

        function expDelete(obj_id) {
            var path = window.location.pathname.split('/');
            var id = path[path.length-2];
            var obj_id = obj_id
            eduUpdateUrl = "/api/professional/professional_work_experience/"+obj_id+"/";
            data={
                'is_archived':true
            }
            put(eduUpdateUrl, JSON.stringify(data), loadExperience);
        }

        function refDelete(obj_id) {
            var obj_id = obj_id
            refUpdateUrl = "/api/professional/professional_reference/"+obj_id+"/";
            data={
                'is_archived':true
            }
            put(refUpdateUrl, JSON.stringify(data), loadReference);
        }

        function cerDelete(obj_id) {
            var path = window.location.pathname.split('/');
            var id = path[path.length-2];
            var obj_id = obj_id
            cerUpdateUrl = " /api/professional/professional_certification/"+obj_id+"/";
            data={
                'is_archived':true
            }
            put(cerUpdateUrl, JSON.stringify(data), loadCertificates);
        }

        function portfolioDelete(obj_id) {
            var path = window.location.pathname.split('/');
            var id = path[path.length-2];
            var obj_id = obj_id
            cerUpdateUrl = " /api/professional/professional_portfolio/"+obj_id+"/";
            data={
                'is_archived':true
            }
            put(cerUpdateUrl, JSON.stringify(data), loadPortfolioCreateUpdate);
        }

        function skillDelete(obj_id) {
            var path = window.location.pathname.split('/');
            var id = path[path.length-2];
            var obj_id = obj_id
            skillUpdateUrl = "/api/professional/professional_skill/"+obj_id+"/";
            data={
                'is_archived':true
            }
            put(skillUpdateUrl, JSON.stringify(data), loadProfSkillsCreateUpdate);
        }


        function memDelete(obj_id) {
            var path = window.location.pathname.split('/');
            var id = path[path.length-2];
            var obj_id = obj_id
            memUpdateUrl = "/api/professional/professional_membership/"+obj_id+"/";
            data={
                'is_archived':true
            }
            put(memUpdateUrl, JSON.stringify(data), loadMembership);
        }

        function initAjaxFormsDate() {
            $("form.ajaxDate").on('submit', function(event) {
                event.preventDefault();
                if ($(this).valid()){
                    var url = $(this).prop('action');
                    var formId = $(this).attr("id");
                    var data = form2Json(formId);
                    // Image uploading code start here
                    var jsonData = JSON.parse(data)
                    if(jsonData.date_of_birth){
                        var momentObj = moment(jsonData.date_of_birth, 'DD/MM/YYYY');
                        jsonData.date_of_birth = momentObj.format('YYYY-MM-DD');
                    }
                    // Image uploading code end here

                    var method = $(this).attr('method');
                    var callback= $(this).data("callback");  // $(this).attr("data-callback");
                    send(url, method, JSON.stringify(jsonData), callback);
                }
                return false;
            });

        }

        function cropImage(inputId, modalId) {
            $("#"+inputId).on('change',function () {
                if((this.files[0].size/1000) < 2000){
                    if (this.files && this.files[0]) {
                        var reader = new FileReader();

                        reader.onload = function (e) {
                            $("#image").attr("src", e.target.result);
                            $("#"+modalId).modal("show");
                        }
                        reader.readAsDataURL(this.files[0]);
                    }
                }else{
                    showError('Picture Maximum Size Exceeded','Enter A Picture below 2MB Size');
                }
            });

            /* SCRIPTS TO HANDLE THE CROPPER BOX */
            var $image = $("#image");
            var cropBoxData;
            var canvasData;
            $("#"+modalId).on("shown.bs.modal", function () {
                $image.cropper({
                    viewMode: 1,
                    aspectRatio: 1/1,
                    minCropBoxWidth: 200,
                    minCropBoxHeight: 200,
                    fillColor: '#fff',
                    ready: function () {
                        $image.cropper("setCanvasData", canvasData);
                        $image.cropper("setCropBoxData", cropBoxData);
                    }
                });
            }).on("hidden.bs.modal", function () {
                cropBoxData = $image.cropper("getCropBoxData");
                canvasData = $image.cropper("getCanvasData");
                $image.cropper("destroy");
            });

            // Enable zoom in button
            $(".js-zoom-in").click(function () {
                $image.cropper("zoom", 0.1);
            });

            // Enable zoom out button
            $(".js-zoom-out").click(function () {
                $image.cropper("zoom", -0.1);
            });

            /* SCRIPT TO COLLECT THE DATA AND POST TO THE SERVER */
            $(".js-crop-and-preview").click(function () {
                var imageData = $('#image').cropper('getCroppedCanvas', {fillColor: '#fff'}).toDataURL('image/jpeg', 0.3) ;
                $('.jcrop-holder').attr('src', imageData);
                $("#"+inputId).val("");
                $("#"+modalId).modal('hide');
            });

            $('.close').click(function() {
                $("#"+inputId).val("");

            });

        }

        function loadJobAlertStatus(data) {
            if(data.responseJSON.job_alert_status === true){
                $("#subscribe-text").text('Unsubscribe job alert.');
                showSuccess('Successful!', 'You have subscribed for job alert.');
            }else {
                $("#subscribe-text").text('Subscribe for job alert.');
                showSuccess('Successful!', 'You have unsubscribed for job alert.');
            }
        }

    </script>
{% endblock %}

